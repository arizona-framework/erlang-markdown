%%% % DO NOT EDIT: this file was generated by 'just codegen'
%%% % @generated SignedSource<<8ba38b359aa6865e60cb9b6bb2bc63d3>>
%%%-----------------------------------------------------------------------------
%%% Copyright (c) Meta Platforms, Inc. and affiliates.
%%% Copyright (c) WhatsApp LLC
%%%
%%% This source code is licensed under the MIT license found in the
%%% LICENSE.md file in the root directory of this source tree.
%%%
%%% @author Andrew Bennett <potatosaladx@meta.com>
%%% @copyright (c) Meta Platforms, Inc. and affiliates.
%%% @doc
%%%
%%% @end
%%% Created :  04 Mar 2025 by Andrew Bennett <potatosaladx@meta.com>
%%%-----------------------------------------------------------------------------
%%% % @format
%% @oncall whatsapp_clr
-ifndef(MARKDOWN_HTML_HRL).
-define(MARKDOWN_HTML_HRL, 1).

%% Context used to compile markdown.
-record(markdown_html_compile_context, {
    %% Static info.
    %%% List of events.
    events :: markdown_vec:t(markdown_event:t()),
    %%% List of bytes.
    bytes :: binary(),
    %%% Configuration.
    options :: markdown_compile_options:t(),
    %% Fields used by handlers to track the things they need to track to
    %% compile markdown.
    %%% Rank of heading (atx).
    heading_atx_rank = none :: markdown_option:t(markdown_types:usize()),
    %%% Buffer of heading (setext) text.
    heading_setext_buffer = none :: markdown_option:t(binary()),
    %%% Whether raw (flow) (code (fenced), math (flow)) or code (indented) contains data.
    raw_flow_seen_data = none :: markdown_option:t(boolean()),
    %%% Number of raw (flow) fences.
    raw_flow_fences_count = none :: markdown_option:t(markdown_types:usize()),
    %%% Whether we are in code (text).
    raw_text_inside = false :: boolean(),
    %%% Whether we are in image text.
    image_alt_inside = false :: boolean(),
    %%% Marker of character reference.
    character_reference_marker = none :: markdown_option:t(byte()),
    %%% Whether we are expecting the first list item marker.
    list_expect_first_marker = none :: markdown_option:t(boolean()),
    %%% Stack of media (link, image).
    media_stack = markdown_vec:new() :: markdown_vec:t(markdown_html_media:t()),
    %%% Stack of containers.
    tight_stack = markdown_vec:new() :: markdown_vec:t(boolean()),
    %%% List of definitions.
    definitions = markdown_vec:new() :: markdown_vec:t(markdown_html_definition:t()),
    %%% List of definitions.
    gfm_footnote_definitions = markdown_vec:new() :: markdown_vec:t({binary(), binary()}),
    gfm_footnote_definition_calls = markdown_vec:new() :: markdown_vec:t({binary(), markdown_types:usize()}),
    gfm_footnote_definition_stack = markdown_vec:new() :: markdown_vec:t({
        markdown_types:usize(), markdown_types:usize()
    }),
    %%% Whether we are in a GFM table head.
    gfm_table_in_head = false :: boolean(),
    %%% Current GFM table alignment.
    gfm_table_align = none :: markdown_option:t(markdown_vec:t(markdown_align_kind:t())),
    %%% Current GFM table column.
    gfm_table_column = 0 :: markdown_types:usize(),
    %% Fields used to influance the current compilation.
    %%% Ignore the next line ending.
    slurp_one_line_ending = false :: boolean(),
    %%% Whether to encode HTML.
    encode_html = true :: boolean(),
    %% Configuration
    %%% Line ending to use.
    line_ending_default :: markdown_line_ending:t(),
    %% Intermediate results.
    %%% Stack of buffers.
    buffers = markdown_vec:from_list([<<>>]) :: markdown_vec:t(binary()),
    %%% Current event index.
    index = 0 :: markdown_types:usize()
}).

%% Representation of a definition.
-record(markdown_html_definition, {
    %% Identifier.
    id :: binary(),
    %% The destination (url).
    %%
    %% Interpreted string content.
    destination :: markdown_option:t(binary()),
    %% The title.
    %%
    %% Interpreted string content.
    title :: markdown_option:t(binary())
}).

%% Link, image, or footnote call.
%% Resource or reference.
%% Reused for temporary definitions as well, in the first pass.
-record(markdown_html_media, {
    %% Whether this represents an image (`true`) or a link or definition
    %% (`false`).
    image :: boolean(),
    %% The text between the brackets (`x` in `![x]()` and `[x]()`).
    %%
    %% Not interpreted.
    label_id :: markdown_option:t(markdown_indices:t()),
    %% The result of interpreting the text between the brackets
    %% (`x` in `![x]()` and `[x]()`).
    %%
    %% When this is a link, it contains further text content and thus HTML
    %% tags.
    %% Otherwise, when an image, text content is also allowed, but resulting
    %% tags are ignored.
    label :: markdown_option:t(binary()),
    %% The string between the explicit brackets of the reference (`y` in
    %% `[x][y]`), as content.
    %%
    %% Not interpreted.
    reference_id :: markdown_option:t(markdown_indices:t()),
    %% The destination (url).
    %%
    %% Interpreted string content.
    destination :: markdown_option:t(binary()),
    %% The destination (url).
    %%
    %% Interpreted string content.
    title :: markdown_option:t(binary())
}).

-endif.
