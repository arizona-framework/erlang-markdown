%%% % DO NOT EDIT: this file was generated by 'just codegen'
%%% % @generated SignedSource<<f0b09168caaeefffe46ae47de4c0299d>>
%%%-----------------------------------------------------------------------------
%%% %CopyrightBegin%
%%%
%%% SPDX-License-Identifier: Apache-2.0
%%%
%%% Copyright (c) Meta Platforms, Inc. and affiliates.
%%% Copyright (c) WhatsApp LLC
%%%
%%% Licensed under the Apache License, Version 2.0 (the "License");
%%% you may not use this file except in compliance with the License.
%%% You may obtain a copy of the License at
%%%
%%%     http://www.apache.org/licenses/LICENSE-2.0
%%%
%%% Unless required by applicable law or agreed to in writing, software
%%% distributed under the License is distributed on an "AS IS" BASIS,
%%% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
%%% See the License for the specific language governing permissions and
%%% limitations under the License.
%%%
%%% %CopyrightEnd%
%%%-----------------------------------------------------------------------------
%%% % @format
-module(markdown_attention_SUITE).
-moduledoc """

""".
-moduledoc #{author => ["Andrew Bennett <potatosaladx@meta.com>"]}.
-moduledoc #{created => "2025-10-28", modified => "2025-10-28"}.
-moduledoc #{copyright => "Meta Platforms, Inc. and affiliates."}.
-compile(warn_missing_spec_all).
-oncall("whatsapp_clr").

-include_lib("markdown/include/markdown_mdast.hrl").
-include_lib("markdown/include/markdown_util.hrl").
-include_lib("stdlib/include/assert.hrl").

-behaviour(ct_suite).

%% ct_suite callbacks
-export([
    all/0,
    groups/0,
    init_per_suite/1,
    end_per_suite/1,
    init_per_group/2,
    end_per_group/2
]).

%% Test Cases
-export([
    %% Rule 1.
    test_attention_case_1/1,
    test_attention_case_2/1,
    test_attention_case_3/1,
    test_attention_case_4/1,
    test_attention_case_5/1,
    test_attention_case_6/1,
    %% Rule 2.
    test_attention_case_7/1,
    test_attention_case_8/1,
    test_attention_case_9/1,
    test_attention_case_10/1,
    test_attention_case_11/1,
    test_attention_case_12/1,
    test_attention_case_13/1,
    test_attention_case_14/1,
    %% Rule 3.
    test_attention_case_15/1,
    test_attention_case_16/1,
    test_attention_case_17/1,
    test_attention_case_18/1,
    test_attention_case_19/1,
    %% Rule 4.
    test_attention_case_20/1,
    test_attention_case_21/1,
    test_attention_case_22/1,
    test_attention_case_23/1,
    test_attention_case_24/1,
    test_attention_case_25/1,
    test_attention_case_26/1,
    %% Rule 5.
    test_attention_case_27/1,
    test_attention_case_28/1,
    test_attention_case_29/1,
    test_attention_case_30/1,
    %% Rule 6.
    test_attention_case_31/1,
    test_attention_case_32/1,
    test_attention_case_33/1,
    test_attention_case_34/1,
    test_attention_case_35/1,
    test_attention_case_36/1,
    test_attention_case_37/1,
    test_attention_case_38/1,
    test_attention_case_39/1,
    %% Rule 7.
    test_attention_case_40/1,
    test_attention_case_41/1,
    test_attention_case_42/1,
    test_attention_case_43/1,
    test_attention_case_44/1,
    test_attention_case_45/1,
    %% Rule 8.
    test_attention_case_46/1,
    test_attention_case_47/1,
    test_attention_case_48/1,
    test_attention_case_49/1,
    test_attention_case_50/1,
    test_attention_case_51/1,
    test_attention_case_52/1,
    %% Rule 9.
    test_attention_case_53/1,
    test_attention_case_54/1,
    test_attention_case_55/1,
    test_attention_case_56/1,
    test_attention_case_57/1,
    test_attention_case_58/1,
    test_attention_case_59/1,
    test_attention_case_60/1,
    test_attention_case_61/1,
    test_attention_case_62/1,
    test_attention_case_63/1,
    test_attention_case_64/1,
    test_attention_case_65/1,
    test_attention_case_66/1,
    test_attention_case_67/1,
    test_attention_case_68/1,
    test_attention_case_69/1,
    test_attention_case_70/1,
    %% Rule 10.
    test_attention_case_71/1,
    test_attention_case_72/1,
    test_attention_case_73/1,
    test_attention_case_74/1,
    test_attention_case_75/1,
    test_attention_case_76/1,
    test_attention_case_77/1,
    test_attention_case_78/1,
    test_attention_case_79/1,
    test_attention_case_80/1,
    test_attention_case_81/1,
    test_attention_case_82/1,
    test_attention_case_83/1,
    test_attention_case_84/1,
    %% Rule 11.
    test_attention_case_85/1,
    test_attention_case_86/1,
    test_attention_case_87/1,
    test_attention_case_88/1,
    test_attention_case_89/1,
    test_attention_case_90/1,
    test_attention_case_91/1,
    test_attention_case_92/1,
    test_attention_case_93/1,
    test_attention_case_94/1,
    test_attention_case_95/1,
    test_attention_case_96/1,
    %% Rule 12.
    test_attention_case_97/1,
    test_attention_case_98/1,
    test_attention_case_99/1,
    test_attention_case_100/1,
    test_attention_case_101/1,
    test_attention_case_102/1,
    test_attention_case_103/1,
    test_attention_case_104/1,
    test_attention_case_105/1,
    test_attention_case_106/1,
    test_attention_case_107/1,
    test_attention_case_108/1,
    %% Rule 13.
    test_attention_case_109/1,
    test_attention_case_110/1,
    test_attention_case_111/1,
    test_attention_case_112/1,
    test_attention_case_113/1,
    test_attention_case_114/1,
    test_attention_case_115/1,
    %% Rule 14.
    test_attention_case_116/1,
    test_attention_case_117/1,
    %% Rule 15.
    test_attention_case_118/1,
    test_attention_case_119/1,
    %% Rule 16.
    test_attention_case_120/1,
    test_attention_case_121/1,
    %% Rule 17.
    test_attention_case_122/1,
    test_attention_case_123/1,
    test_attention_case_124/1,
    test_attention_case_125/1,
    test_attention_case_126/1,
    test_attention_case_127/1,
    test_attention_case_128/1,
    test_attention_case_129/1,
    test_attention_case_130/1,
    test_attention_case_131/1,
    test_attention_case_132/1,
    test_attention_case_133/1
]).

%% Macros
-define(danger, markdown_options:new(#{compile => #{allow_dangerous_html => true, allow_dangerous_protocol => true}})).

%%%=============================================================================
%%% ct_suite callbacks
%%%=============================================================================

-spec all() -> markdown_test:all().
all() ->
    [
        {group, static}
    ].

-spec groups() -> markdown_test:groups().
groups() ->
    [
        {static, [parallel], [
            %% Rule 1.
            test_attention_case_1,
            test_attention_case_2,
            test_attention_case_3,
            test_attention_case_4,
            test_attention_case_5,
            test_attention_case_6,
            %% Rule 2.
            test_attention_case_7,
            test_attention_case_8,
            test_attention_case_9,
            test_attention_case_10,
            test_attention_case_11,
            test_attention_case_12,
            test_attention_case_13,
            test_attention_case_14,
            %% Rule 3.
            test_attention_case_15,
            test_attention_case_16,
            test_attention_case_17,
            test_attention_case_18,
            test_attention_case_19,
            %% Rule 4.
            test_attention_case_20,
            test_attention_case_21,
            test_attention_case_22,
            test_attention_case_23,
            test_attention_case_24,
            test_attention_case_25,
            test_attention_case_26,
            %% Rule 5.
            test_attention_case_27,
            test_attention_case_28,
            test_attention_case_29,
            test_attention_case_30,
            %% Rule 6.
            test_attention_case_31,
            test_attention_case_32,
            test_attention_case_33,
            test_attention_case_34,
            test_attention_case_35,
            test_attention_case_36,
            test_attention_case_37,
            test_attention_case_38,
            test_attention_case_39,
            %% Rule 7.
            test_attention_case_40,
            test_attention_case_41,
            test_attention_case_42,
            test_attention_case_43,
            test_attention_case_44,
            test_attention_case_45,
            %% Rule 8.
            test_attention_case_46,
            test_attention_case_47,
            test_attention_case_48,
            test_attention_case_49,
            test_attention_case_50,
            test_attention_case_51,
            test_attention_case_52,
            %% Rule 9.
            test_attention_case_53,
            test_attention_case_54,
            test_attention_case_55,
            test_attention_case_56,
            test_attention_case_57,
            test_attention_case_58,
            test_attention_case_59,
            test_attention_case_60,
            test_attention_case_61,
            test_attention_case_62,
            test_attention_case_63,
            test_attention_case_64,
            test_attention_case_65,
            test_attention_case_66,
            test_attention_case_67,
            test_attention_case_68,
            test_attention_case_69,
            test_attention_case_70,
            %% Rule 10.
            test_attention_case_71,
            test_attention_case_72,
            test_attention_case_73,
            test_attention_case_74,
            test_attention_case_75,
            test_attention_case_76,
            test_attention_case_77,
            test_attention_case_78,
            test_attention_case_79,
            test_attention_case_80,
            test_attention_case_81,
            test_attention_case_82,
            test_attention_case_83,
            test_attention_case_84,
            %% Rule 11.
            test_attention_case_85,
            test_attention_case_86,
            test_attention_case_87,
            test_attention_case_88,
            test_attention_case_89,
            test_attention_case_90,
            test_attention_case_91,
            test_attention_case_92,
            test_attention_case_93,
            test_attention_case_94,
            test_attention_case_95,
            test_attention_case_96,
            %% Rule 12.
            test_attention_case_97,
            test_attention_case_98,
            test_attention_case_99,
            test_attention_case_100,
            test_attention_case_101,
            test_attention_case_102,
            test_attention_case_103,
            test_attention_case_104,
            test_attention_case_105,
            test_attention_case_106,
            test_attention_case_107,
            test_attention_case_108,
            %% Rule 13.
            test_attention_case_109,
            test_attention_case_110,
            test_attention_case_111,
            test_attention_case_112,
            test_attention_case_113,
            test_attention_case_114,
            test_attention_case_115,
            %% Rule 14.
            test_attention_case_116,
            test_attention_case_117,
            %% Rule 15.
            test_attention_case_118,
            test_attention_case_119,
            %% Rule 16.
            test_attention_case_120,
            test_attention_case_121,
            %% Rule 17.
            test_attention_case_122,
            test_attention_case_123,
            test_attention_case_124,
            test_attention_case_125,
            test_attention_case_126,
            test_attention_case_127,
            test_attention_case_128,
            test_attention_case_129,
            test_attention_case_130,
            test_attention_case_131,
            test_attention_case_132,
            test_attention_case_133
        ]}
    ].

-spec init_per_suite(Config :: ct_suite:ct_config()) -> markdown_test:init_per_suite().
init_per_suite(Config) ->
    Config.

-spec end_per_suite(Config :: ct_suite:ct_config()) -> markdown_test:end_per_suite().
end_per_suite(_Config) ->
    ok.

-spec init_per_group(GroupName :: ct_suite:ct_groupname(), Config :: ct_suite:ct_config()) ->
    markdown_test:init_per_group().
init_per_group(_Group, Config) ->
    Config.

-spec end_per_group(GroupName :: ct_suite:ct_groupname(), Config :: ct_suite:ct_config()) ->
    markdown_test:end_per_group().
end_per_group(_Group, _Config) ->
    ok.

%%%=============================================================================
%%% Test Cases
%%%=============================================================================

-spec test_attention_case_1(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_1(_Config) ->
    %% Rule 1.
    ?assertMatch(
        {ok, <<"<p><em>foo bar</em></p>"/utf8>>},
        markdown:to_html(<<"*foo bar*"/utf8>>),
        "should support emphasis w/ `*`"
    ),
    ok.

-spec test_attention_case_2(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_2(_Config) ->
    ?assertMatch(
        {ok, <<"<p>a * foo bar*</p>"/utf8>>},
        markdown:to_html(<<"a * foo bar*"/utf8>>),
        "should not support emphasis if the opening is not left flanking (1)"
    ),
    ok.

-spec test_attention_case_3(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_3(_Config) ->
    ?assertMatch(
        {ok, <<"<p>a*&quot;foo&quot;*</p>"/utf8>>},
        markdown:to_html(<<"a*\"foo\"*"/utf8>>),
        "should not support emphasis if the opening is not left flanking (2b)"
    ),
    ok.

-spec test_attention_case_4(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_4(_Config) ->
    ?assertMatch(
        {ok, <<"<p>* a *</p>"/utf8>>},
        markdown:to_html(<<"* a *"/utf8>>),
        "should not support emphasis unicode whitespace either"
    ),
    ok.

-spec test_attention_case_5(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_5(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo<em>bar</em></p>"/utf8>>},
        markdown:to_html(<<"foo*bar*"/utf8>>),
        "should support intraword emphasis w/ `*` (1)"
    ),
    ok.

-spec test_attention_case_6(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_6(_Config) ->
    ?assertMatch(
        {ok, <<"<p>5<em>6</em>78</p>"/utf8>>},
        markdown:to_html(<<"5*6*78"/utf8>>),
        "should support intraword emphasis w/ `*` (2)"
    ),
    ok.

-spec test_attention_case_7(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_7(_Config) ->
    %% Rule 2.
    ?assertMatch(
        {ok, <<"<p><em>foo bar</em></p>"/utf8>>},
        markdown:to_html(<<"_foo bar_"/utf8>>),
        "should support emphasis w/ `_`"
    ),
    ok.

-spec test_attention_case_8(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_8(_Config) ->
    ?assertMatch(
        {ok, <<"<p>_ foo bar_</p>"/utf8>>},
        markdown:to_html(<<"_ foo bar_"/utf8>>),
        "should not support emphasis if the opening is followed by whitespace"
    ),
    ok.

-spec test_attention_case_9(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_9(_Config) ->
    ?assertMatch(
        {ok, <<"<p>a_&quot;foo&quot;_</p>"/utf8>>},
        markdown:to_html(<<"a_\"foo\"_"/utf8>>),
        "should not support emphasis if the opening is preceded by something else and followed by punctuation"
    ),
    ok.

-spec test_attention_case_10(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_10(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo_bar_</p>"/utf8>>},
        markdown:to_html(<<"foo_bar_"/utf8>>),
        "should not support intraword emphasis (1)"
    ),
    ok.

-spec test_attention_case_11(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_11(_Config) ->
    ?assertMatch(
        {ok, <<"<p>5_6_78</p>"/utf8>>},
        markdown:to_html(<<"5_6_78"/utf8>>),
        "should not support intraword emphasis (2)"
    ),
    ok.

-spec test_attention_case_12(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_12(_Config) ->
    ?assertMatch(
        {ok, <<"<p>пристаням_стремятся_</p>"/utf8>>},
        markdown:to_html(<<"пристаням_стремятся_"/utf8>>),
        "should not support intraword emphasis (3)"
    ),
    ok.

-spec test_attention_case_13(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_13(_Config) ->
    ?assertMatch(
        {ok, <<"<p>aa_&quot;bb&quot;_cc</p>"/utf8>>},
        markdown:to_html(<<"aa_\"bb\"_cc"/utf8>>),
        "should not support emphasis if the opening is right flanking and the closing is left flanking"
    ),
    ok.

-spec test_attention_case_14(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_14(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo-<em>(bar)</em></p>"/utf8>>},
        markdown:to_html(<<"foo-_(bar)_"/utf8>>),
        "should support emphasis if the opening is both left and right flanking, if it’s preceded by punctuation"
    ),
    ok.

-spec test_attention_case_15(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_15(_Config) ->
    %% Rule 3.
    ?assertMatch(
        {ok, <<"<p>_foo*</p>"/utf8>>},
        markdown:to_html(<<"_foo*"/utf8>>),
        "should not support emphasis if opening and closing markers don’t match"
    ),
    ok.

-spec test_attention_case_16(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_16(_Config) ->
    ?assertMatch(
        {ok, <<"<p>*foo bar *</p>"/utf8>>},
        markdown:to_html(<<"*foo bar *"/utf8>>),
        "should not support emphasis w/ `*` if the closing markers are preceded by whitespace"
    ),
    ok.

-spec test_attention_case_17(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_17(_Config) ->
    ?assertMatch(
        {ok, <<"<p>*foo bar\n*</p>"/utf8>>},
        markdown:to_html(<<"*foo bar\n*"/utf8>>),
        "should not support emphasis w/ `*` if the closing markers are preceded by a line break (also whitespace)"
    ),
    ok.

-spec test_attention_case_18(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_18(_Config) ->
    ?assertMatch(
        {ok, <<"<p>*(*foo)</p>"/utf8>>},
        markdown:to_html(<<"*(*foo)"/utf8>>),
        "should not support emphasis w/ `*` if the closing markers are not right flanking"
    ),
    ok.

-spec test_attention_case_19(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_19(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>(<em>foo</em>)</em></p>"/utf8>>},
        markdown:to_html(<<"*(*foo*)*"/utf8>>),
        "should support nested emphasis"
    ),
    ok.

-spec test_attention_case_20(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_20(_Config) ->
    %% Rule 4.
    ?assertMatch(
        {ok, <<"<p>_foo bar _</p>"/utf8>>},
        markdown:to_html(<<"_foo bar _"/utf8>>),
        "should not support emphasis if the closing `_` is preceded by whitespace"
    ),
    ok.

-spec test_attention_case_21(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_21(_Config) ->
    ?assertMatch(
        {ok, <<"<p>_(_foo)</p>"/utf8>>},
        markdown:to_html(<<"_(_foo)"/utf8>>),
        "should not support emphasis w/ `_` if the closing markers are not right flanking"
    ),
    ok.

-spec test_attention_case_22(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_22(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>(<em>foo</em>)</em></p>"/utf8>>},
        markdown:to_html(<<"_(_foo_)_"/utf8>>),
        "should support nested emphasis w/ `_`"
    ),
    ok.

-spec test_attention_case_23(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_23(_Config) ->
    ?assertMatch(
        {ok, <<"<p>_foo_bar</p>"/utf8>>},
        markdown:to_html(<<"_foo_bar"/utf8>>),
        "should not support intraword emphasis w/ `_` (1)"
    ),
    ok.

-spec test_attention_case_24(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_24(_Config) ->
    ?assertMatch(
        {ok, <<"<p>_пристаням_стремятся</p>"/utf8>>},
        markdown:to_html(<<"_пристаням_стремятся"/utf8>>),
        "should not support intraword emphasis w/ `_` (2)"
    ),
    ok.

-spec test_attention_case_25(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_25(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo_bar_baz</em></p>"/utf8>>},
        markdown:to_html(<<"_foo_bar_baz_"/utf8>>),
        "should not support intraword emphasis w/ `_` (3)"
    ),
    ok.

-spec test_attention_case_26(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_26(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>(bar)</em>.</p>"/utf8>>},
        markdown:to_html(<<"_(bar)_."/utf8>>),
        "should support emphasis if the opening is both left and right flanking, if it’s followed by punctuation"
    ),
    ok.

-spec test_attention_case_27(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_27(_Config) ->
    %% Rule 5.
    ?assertMatch(
        {ok, <<"<p><strong>foo bar</strong></p>"/utf8>>},
        markdown:to_html(<<"**foo bar**"/utf8>>),
        "should support strong emphasis"
    ),
    ok.

-spec test_attention_case_28(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_28(_Config) ->
    ?assertMatch(
        {ok, <<"<p>** foo bar**</p>"/utf8>>},
        markdown:to_html(<<"** foo bar**"/utf8>>),
        "should not support strong emphasis if the opening is followed by whitespace"
    ),
    ok.

-spec test_attention_case_29(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_29(_Config) ->
    ?assertMatch(
        {ok, <<"<p>a**&quot;foo&quot;**</p>"/utf8>>},
        markdown:to_html(<<"a**\"foo\"**"/utf8>>),
        "should not support strong emphasis if the opening is preceded by something else and followed by punctuation"
    ),
    ok.

-spec test_attention_case_30(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_30(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo<strong>bar</strong></p>"/utf8>>},
        markdown:to_html(<<"foo**bar**"/utf8>>),
        "should support strong intraword emphasis"
    ),
    ok.

-spec test_attention_case_31(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_31(_Config) ->
    %% Rule 6.
    ?assertMatch(
        {ok, <<"<p><strong>foo bar</strong></p>"/utf8>>},
        markdown:to_html(<<"__foo bar__"/utf8>>),
        "should support strong emphasis w/ `_`"
    ),
    ok.

-spec test_attention_case_32(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_32(_Config) ->
    ?assertMatch(
        {ok, <<"<p>__ foo bar__</p>"/utf8>>},
        markdown:to_html(<<"__ foo bar__"/utf8>>),
        "should not support strong emphasis if the opening is followed by whitespace"
    ),
    ok.

-spec test_attention_case_33(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_33(_Config) ->
    ?assertMatch(
        {ok, <<"<p>__\nfoo bar__</p>"/utf8>>},
        markdown:to_html(<<"__\nfoo bar__"/utf8>>),
        "should not support strong emphasis if the opening is followed by a line ending (also whitespace)"
    ),
    ok.

-spec test_attention_case_34(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_34(_Config) ->
    ?assertMatch(
        {ok, <<"<p>a__&quot;foo&quot;__</p>"/utf8>>},
        markdown:to_html(<<"a__\"foo\"__"/utf8>>),
        "should not support strong emphasis if the opening is preceded by something else and followed by punctuation"
    ),
    ok.

-spec test_attention_case_35(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_35(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo__bar__</p>"/utf8>>},
        markdown:to_html(<<"foo__bar__"/utf8>>),
        "should not support strong intraword emphasis w/ `_` (1)"
    ),
    ok.

-spec test_attention_case_36(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_36(_Config) ->
    ?assertMatch(
        {ok, <<"<p>5__6__78</p>"/utf8>>},
        markdown:to_html(<<"5__6__78"/utf8>>),
        "should not support strong intraword emphasis w/ `_` (2)"
    ),
    ok.

-spec test_attention_case_37(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_37(_Config) ->
    ?assertMatch(
        {ok, <<"<p>пристаням__стремятся__</p>"/utf8>>},
        markdown:to_html(<<"пристаням__стремятся__"/utf8>>),
        "should not support strong intraword emphasis w/ `_` (3)"
    ),
    ok.

-spec test_attention_case_38(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_38(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo, <strong>bar</strong>, baz</strong></p>"/utf8>>},
        markdown:to_html(<<"__foo, __bar__, baz__"/utf8>>),
        "should support nested strong emphasis"
    ),
    ok.

-spec test_attention_case_39(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_39(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo-<strong>(bar)</strong></p>"/utf8>>},
        markdown:to_html(<<"foo-__(bar)__"/utf8>>),
        "should support strong emphasis if the opening is both left and right flanking, if it’s preceded by punctuation"
    ),
    ok.

-spec test_attention_case_40(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_40(_Config) ->
    %% Rule 7.
    ?assertMatch(
        {ok, <<"<p>**foo bar **</p>"/utf8>>},
        markdown:to_html(<<"**foo bar **"/utf8>>),
        "should not support strong emphasis w/ `*` if the closing is preceded by whitespace"
    ),
    ok.

-spec test_attention_case_41(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_41(_Config) ->
    ?assertMatch(
        {ok, <<"<p>**(**foo)</p>"/utf8>>},
        markdown:to_html(<<"**(**foo)"/utf8>>),
        "should not support strong emphasis w/ `*` if the closing is preceded by punctuation and followed by something else"
    ),
    ok.

-spec test_attention_case_42(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_42(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>(<strong>foo</strong>)</em></p>"/utf8>>},
        markdown:to_html(<<"*(**foo**)*"/utf8>>),
        "should support strong emphasis in emphasis"
    ),
    ok.

-spec test_attention_case_43(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_43(_Config) ->
    ?assertMatch(
        {ok,
            <<"<p><strong>Gomphocarpus (<em>Gomphocarpus physocarpus</em>, syn.\n<em>Asclepias physocarpa</em>)</strong></p>"/utf8>>},
        markdown:to_html(<<"**Gomphocarpus (*Gomphocarpus physocarpus*, syn.\n*Asclepias physocarpa*)**"/utf8>>),
        "should support emphasis in strong emphasis (1)"
    ),
    ok.

-spec test_attention_case_44(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_44(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo &quot;<em>bar</em>&quot; foo</strong></p>"/utf8>>},
        markdown:to_html(<<"**foo \"*bar*\" foo**"/utf8>>),
        "should support emphasis in strong emphasis (2)"
    ),
    ok.

-spec test_attention_case_45(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_45(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo</strong>bar</p>"/utf8>>},
        markdown:to_html(<<"**foo**bar"/utf8>>),
        "should support strong intraword emphasis"
    ),
    ok.

-spec test_attention_case_46(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_46(_Config) ->
    %% Rule 8.
    ?assertMatch(
        {ok, <<"<p>__foo bar __</p>"/utf8>>},
        markdown:to_html(<<"__foo bar __"/utf8>>),
        "should not support strong emphasis w/ `_` if the closing is preceded by whitespace"
    ),
    ok.

-spec test_attention_case_47(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_47(_Config) ->
    ?assertMatch(
        {ok, <<"<p>__(__foo)</p>"/utf8>>},
        markdown:to_html(<<"__(__foo)"/utf8>>),
        "should not support strong emphasis w/ `_` if the closing is preceded by punctuation and followed by something else"
    ),
    ok.

-spec test_attention_case_48(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_48(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>(<strong>foo</strong>)</em></p>"/utf8>>},
        markdown:to_html(<<"_(__foo__)_"/utf8>>),
        "should support strong emphasis w/ `_` in emphasis"
    ),
    ok.

-spec test_attention_case_49(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_49(_Config) ->
    ?assertMatch(
        {ok, <<"<p>__foo__bar</p>"/utf8>>},
        markdown:to_html(<<"__foo__bar"/utf8>>),
        "should not support strong intraword emphasis w/ `_` (1)"
    ),
    ok.

-spec test_attention_case_50(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_50(_Config) ->
    ?assertMatch(
        {ok, <<"<p>__пристаням__стремятся</p>"/utf8>>},
        markdown:to_html(<<"__пристаням__стремятся"/utf8>>),
        "should not support strong intraword emphasis w/ `_` (2)"
    ),
    ok.

-spec test_attention_case_51(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_51(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo__bar__baz</strong></p>"/utf8>>},
        markdown:to_html(<<"__foo__bar__baz__"/utf8>>),
        "should not support strong intraword emphasis w/ `_` (3)"
    ),
    ok.

-spec test_attention_case_52(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_52(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>(bar)</strong>.</p>"/utf8>>},
        markdown:to_html(<<"__(bar)__."/utf8>>),
        "should support strong emphasis if the opening is both left and right flanking, if it’s followed by punctuation"
    ),
    ok.

-spec test_attention_case_53(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_53(_Config) ->
    %% Rule 9.
    ?assertMatch(
        {ok, <<"<p><em>foo <a href=\"/url\">bar</a></em></p>"/utf8>>},
        markdown:to_html(<<"*foo [bar](/url)*"/utf8>>),
        "should support content in emphasis"
    ),
    ok.

-spec test_attention_case_54(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_54(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo\nbar</em></p>"/utf8>>},
        markdown:to_html(<<"*foo\nbar*"/utf8>>),
        "should support line endings in emphasis"
    ),
    ok.

-spec test_attention_case_55(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_55(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo <strong>bar</strong> baz</em></p>"/utf8>>},
        markdown:to_html(<<"_foo __bar__ baz_"/utf8>>),
        "should support nesting emphasis and strong (1)"
    ),
    ok.

-spec test_attention_case_56(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_56(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo <em>bar</em> baz</em></p>"/utf8>>},
        markdown:to_html(<<"_foo _bar_ baz_"/utf8>>),
        "should support nesting emphasis and strong (2)"
    ),
    ok.

-spec test_attention_case_57(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_57(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em><em>foo</em> bar</em></p>"/utf8>>},
        markdown:to_html(<<"__foo_ bar_"/utf8>>),
        "should support nesting emphasis and strong (3)"
    ),
    ok.

-spec test_attention_case_58(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_58(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo <em>bar</em></em></p>"/utf8>>},
        markdown:to_html(<<"*foo *bar**"/utf8>>),
        "should support nesting emphasis and strong (4)"
    ),
    ok.

-spec test_attention_case_59(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_59(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo <strong>bar</strong> baz</em></p>"/utf8>>},
        markdown:to_html(<<"*foo **bar** baz*"/utf8>>),
        "should support nesting emphasis and strong (5)"
    ),
    ok.

-spec test_attention_case_60(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_60(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo<strong>bar</strong>baz</em></p>"/utf8>>},
        markdown:to_html(<<"*foo**bar**baz*"/utf8>>),
        "should support nesting emphasis and strong (6)"
    ),
    ok.

-spec test_attention_case_61(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_61(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo**bar</em></p>"/utf8>>},
        markdown:to_html(<<"*foo**bar*"/utf8>>),
        "should not support adjacent emphasis in certain cases"
    ),
    ok.

-spec test_attention_case_62(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_62(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em><strong>foo</strong> bar</em></p>"/utf8>>},
        markdown:to_html(<<"***foo** bar*"/utf8>>),
        "complex (1)"
    ),
    ok.

-spec test_attention_case_63(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_63(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo <strong>bar</strong></em></p>"/utf8>>},
        markdown:to_html(<<"*foo **bar***"/utf8>>),
        "complex (2)"
    ),
    ok.

-spec test_attention_case_64(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_64(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo<strong>bar</strong></em></p>"/utf8>>},
        markdown:to_html(<<"*foo**bar***"/utf8>>),
        "complex (3)"
    ),
    ok.

-spec test_attention_case_65(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_65(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo<em><strong>bar</strong></em>baz</p>"/utf8>>},
        markdown:to_html(<<"foo***bar***baz"/utf8>>),
        "complex (a)"
    ),
    ok.

-spec test_attention_case_66(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_66(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo<strong><strong><strong>bar</strong></strong></strong>***baz</p>"/utf8>>},
        markdown:to_html(<<"foo******bar*********baz"/utf8>>),
        "complex (b)"
    ),
    ok.

-spec test_attention_case_67(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_67(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo <strong>bar <em>baz</em> bim</strong> bop</em></p>"/utf8>>},
        markdown:to_html(<<"*foo **bar *baz* bim** bop*"/utf8>>),
        "should support indefinite nesting of emphasis (1)"
    ),
    ok.

-spec test_attention_case_68(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_68(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo <a href=\"/url\"><em>bar</em></a></em></p>"/utf8>>},
        markdown:to_html(<<"*foo [*bar*](/url)*"/utf8>>),
        "should support indefinite nesting of emphasis (2)"
    ),
    ok.

-spec test_attention_case_69(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_69(_Config) ->
    ?assertMatch(
        {ok, <<"<p>** is not an empty emphasis</p>"/utf8>>},
        markdown:to_html(<<"** is not an empty emphasis"/utf8>>),
        "should not support empty emphasis"
    ),
    ok.

-spec test_attention_case_70(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_70(_Config) ->
    ?assertMatch(
        {ok, <<"<p>**** is not an empty emphasis</p>"/utf8>>},
        markdown:to_html(<<"**** is not an empty emphasis"/utf8>>),
        "should not support empty strong emphasis"
    ),
    ok.

-spec test_attention_case_71(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_71(_Config) ->
    %% Rule 10.
    ?assertMatch(
        {ok, <<"<p><strong>foo <a href=\"/url\">bar</a></strong></p>"/utf8>>},
        markdown:to_html(<<"**foo [bar](/url)**"/utf8>>),
        "should support content in strong emphasis"
    ),
    ok.

-spec test_attention_case_72(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_72(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo\nbar</strong></p>"/utf8>>},
        markdown:to_html(<<"**foo\nbar**"/utf8>>),
        "should support line endings in emphasis"
    ),
    ok.

-spec test_attention_case_73(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_73(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo <em>bar</em> baz</strong></p>"/utf8>>},
        markdown:to_html(<<"__foo _bar_ baz__"/utf8>>),
        "should support nesting emphasis and strong (1)"
    ),
    ok.

-spec test_attention_case_74(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_74(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo <strong>bar</strong> baz</strong></p>"/utf8>>},
        markdown:to_html(<<"__foo __bar__ baz__"/utf8>>),
        "should support nesting emphasis and strong (2)"
    ),
    ok.

-spec test_attention_case_75(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_75(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong><strong>foo</strong> bar</strong></p>"/utf8>>},
        markdown:to_html(<<"____foo__ bar__"/utf8>>),
        "should support nesting emphasis and strong (3)"
    ),
    ok.

-spec test_attention_case_76(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_76(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo <strong>bar</strong></strong></p>"/utf8>>},
        markdown:to_html(<<"**foo **bar****"/utf8>>),
        "should support nesting emphasis and strong (4)"
    ),
    ok.

-spec test_attention_case_77(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_77(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo <em>bar</em> baz</strong></p>"/utf8>>},
        markdown:to_html(<<"**foo *bar* baz**"/utf8>>),
        "should support nesting emphasis and strong (5)"
    ),
    ok.

-spec test_attention_case_78(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_78(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo<em>bar</em>baz</strong></p>"/utf8>>},
        markdown:to_html(<<"**foo*bar*baz**"/utf8>>),
        "should support nesting emphasis and strong (6)"
    ),
    ok.

-spec test_attention_case_79(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_79(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong><em>foo</em> bar</strong></p>"/utf8>>},
        markdown:to_html(<<"***foo* bar**"/utf8>>),
        "should support nesting emphasis and strong (7)"
    ),
    ok.

-spec test_attention_case_80(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_80(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo <em>bar</em></strong></p>"/utf8>>},
        markdown:to_html(<<"**foo *bar***"/utf8>>),
        "should support nesting emphasis and strong (8)"
    ),
    ok.

-spec test_attention_case_81(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_81(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo <em>bar <strong>baz</strong>\nbim</em> bop</strong></p>"/utf8>>},
        markdown:to_html(<<"**foo *bar **baz**\nbim* bop**"/utf8>>),
        "should support indefinite nesting of emphasis (1)"
    ),
    ok.

-spec test_attention_case_82(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_82(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo <a href=\"/url\"><em>bar</em></a></strong></p>"/utf8>>},
        markdown:to_html(<<"**foo [*bar*](/url)**"/utf8>>),
        "should support indefinite nesting of emphasis (2)"
    ),
    ok.

-spec test_attention_case_83(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_83(_Config) ->
    ?assertMatch(
        {ok, <<"<p>__ is not an empty emphasis</p>"/utf8>>},
        markdown:to_html(<<"__ is not an empty emphasis"/utf8>>),
        "should not support empty emphasis"
    ),
    ok.

-spec test_attention_case_84(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_84(_Config) ->
    ?assertMatch(
        {ok, <<"<p>____ is not an empty emphasis</p>"/utf8>>},
        markdown:to_html(<<"____ is not an empty emphasis"/utf8>>),
        "should not support empty strong emphasis"
    ),
    ok.

-spec test_attention_case_85(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_85(_Config) ->
    %% Rule 11.
    ?assertMatch(
        {ok, <<"<p>foo ***</p>"/utf8>>},
        markdown:to_html(<<"foo ***"/utf8>>),
        "should not support emphasis around the same marker"
    ),
    ok.

-spec test_attention_case_86(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_86(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo <em>*</em></p>"/utf8>>},
        markdown:to_html(<<"foo *\\**"/utf8>>),
        "should support emphasis around an escaped marker"
    ),
    ok.

-spec test_attention_case_87(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_87(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo <em>_</em></p>"/utf8>>},
        markdown:to_html(<<"foo *_*"/utf8>>),
        "should support emphasis around the other marker"
    ),
    ok.

-spec test_attention_case_88(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_88(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo *****</p>"/utf8>>},
        markdown:to_html(<<"foo *****"/utf8>>),
        "should not support strong emphasis around the same marker"
    ),
    ok.

-spec test_attention_case_89(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_89(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo <strong>*</strong></p>"/utf8>>},
        markdown:to_html(<<"foo **\\***"/utf8>>),
        "should support strong emphasis around an escaped marker"
    ),
    ok.

-spec test_attention_case_90(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_90(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo <strong>_</strong></p>"/utf8>>},
        markdown:to_html(<<"foo **_**"/utf8>>),
        "should support strong emphasis around the other marker"
    ),
    ok.

-spec test_attention_case_91(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_91(_Config) ->
    ?assertMatch(
        {ok, <<"<p>*<em>foo</em></p>"/utf8>>},
        markdown:to_html(<<"**foo*"/utf8>>),
        "should support a superfluous marker at the start of emphasis"
    ),
    ok.

-spec test_attention_case_92(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_92(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo</em>*</p>"/utf8>>},
        markdown:to_html(<<"*foo**"/utf8>>),
        "should support a superfluous marker at the end of emphasis"
    ),
    ok.

-spec test_attention_case_93(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_93(_Config) ->
    ?assertMatch(
        {ok, <<"<p>*<strong>foo</strong></p>"/utf8>>},
        markdown:to_html(<<"***foo**"/utf8>>),
        "should support a superfluous marker at the start of strong"
    ),
    ok.

-spec test_attention_case_94(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_94(_Config) ->
    ?assertMatch(
        {ok, <<"<p>***<em>foo</em></p>"/utf8>>},
        markdown:to_html(<<"****foo*"/utf8>>),
        "should support multiple superfluous markers at the start of strong"
    ),
    ok.

-spec test_attention_case_95(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_95(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo</strong>*</p>"/utf8>>},
        markdown:to_html(<<"**foo***"/utf8>>),
        "should support a superfluous marker at the end of strong"
    ),
    ok.

-spec test_attention_case_96(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_96(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo</em>***</p>"/utf8>>},
        markdown:to_html(<<"*foo****"/utf8>>),
        "should support multiple superfluous markers at the end of strong"
    ),
    ok.

-spec test_attention_case_97(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_97(_Config) ->
    %% Rule 12.
    ?assertMatch(
        {ok, <<"<p>foo ___</p>"/utf8>>},
        markdown:to_html(<<"foo ___"/utf8>>),
        "should not support emphasis around the same marker"
    ),
    ok.

-spec test_attention_case_98(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_98(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo <em>_</em></p>"/utf8>>},
        markdown:to_html(<<"foo _\\__"/utf8>>),
        "should support emphasis around an escaped marker"
    ),
    ok.

-spec test_attention_case_99(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_99(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo <em>X</em></p>"/utf8>>},
        markdown:to_html(<<"foo _X_"/utf8>>),
        "should support emphasis around the other marker"
    ),
    ok.

-spec test_attention_case_100(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_100(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo _____</p>"/utf8>>},
        markdown:to_html(<<"foo _____"/utf8>>),
        "should not support strong emphasis around the same marker"
    ),
    ok.

-spec test_attention_case_101(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_101(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo <strong>_</strong></p>"/utf8>>},
        markdown:to_html(<<"foo __\\___"/utf8>>),
        "should support strong emphasis around an escaped marker"
    ),
    ok.

-spec test_attention_case_102(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_102(_Config) ->
    ?assertMatch(
        {ok, <<"<p>foo <strong>X</strong></p>"/utf8>>},
        markdown:to_html(<<"foo __X__"/utf8>>),
        "should support strong emphasis around the other marker"
    ),
    ok.

-spec test_attention_case_103(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_103(_Config) ->
    ?assertMatch(
        {ok, <<"<p>_<em>foo</em></p>"/utf8>>},
        markdown:to_html(<<"__foo_"/utf8>>),
        "should support a superfluous marker at the start of emphasis"
    ),
    ok.

-spec test_attention_case_104(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_104(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo</em>_</p>"/utf8>>},
        markdown:to_html(<<"_foo__"/utf8>>),
        "should support a superfluous marker at the end of emphasis"
    ),
    ok.

-spec test_attention_case_105(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_105(_Config) ->
    ?assertMatch(
        {ok, <<"<p>_<strong>foo</strong></p>"/utf8>>},
        markdown:to_html(<<"___foo__"/utf8>>),
        "should support a superfluous marker at the start of strong"
    ),
    ok.

-spec test_attention_case_106(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_106(_Config) ->
    ?assertMatch(
        {ok, <<"<p>___<em>foo</em></p>"/utf8>>},
        markdown:to_html(<<"____foo_"/utf8>>),
        "should support multiple superfluous markers at the start of strong"
    ),
    ok.

-spec test_attention_case_107(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_107(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo</strong>_</p>"/utf8>>},
        markdown:to_html(<<"__foo___"/utf8>>),
        "should support a superfluous marker at the end of strong"
    ),
    ok.

-spec test_attention_case_108(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_108(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo</em>___</p>"/utf8>>},
        markdown:to_html(<<"_foo____"/utf8>>),
        "should support multiple superfluous markers at the end of strong"
    ),
    ok.

-spec test_attention_case_109(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_109(_Config) ->
    %% Rule 13.
    ?assertMatch(
        {ok, <<"<p><strong>foo</strong></p>"/utf8>>},
        markdown:to_html(<<"**foo**"/utf8>>),
        "should support strong w/ `*`"
    ),
    ok.

-spec test_attention_case_110(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_110(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em><em>foo</em></em></p>"/utf8>>},
        markdown:to_html(<<"*_foo_*"/utf8>>),
        "should support emphasis directly in emphasis w/ `_` in `*`"
    ),
    ok.

-spec test_attention_case_111(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_111(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong>foo</strong></p>"/utf8>>},
        markdown:to_html(<<"__foo__"/utf8>>),
        "should support strong w/ `_`"
    ),
    ok.

-spec test_attention_case_112(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_112(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em><em>foo</em></em></p>"/utf8>>},
        markdown:to_html(<<"_*foo*_"/utf8>>),
        "should support emphasis directly in emphasis w/ `*` in `_`"
    ),
    ok.

-spec test_attention_case_113(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_113(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong><strong>foo</strong></strong></p>"/utf8>>},
        markdown:to_html(<<"****foo****"/utf8>>),
        "should support strong emphasis directly in strong emphasis w/ `*`"
    ),
    ok.

-spec test_attention_case_114(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_114(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong><strong>foo</strong></strong></p>"/utf8>>},
        markdown:to_html(<<"____foo____"/utf8>>),
        "should support strong emphasis directly in strong emphasis w/ `_`"
    ),
    ok.

-spec test_attention_case_115(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_115(_Config) ->
    ?assertMatch(
        {ok, <<"<p><strong><strong><strong>foo</strong></strong></strong></p>"/utf8>>},
        markdown:to_html(<<"******foo******"/utf8>>),
        "should support indefinite strong emphasis"
    ),
    ok.

-spec test_attention_case_116(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_116(_Config) ->
    %% Rule 14.
    ?assertMatch(
        {ok, <<"<p><em><strong>foo</strong></em></p>"/utf8>>},
        markdown:to_html(<<"***foo***"/utf8>>),
        "should support strong directly in emphasis w/ `*`"
    ),
    ok.

-spec test_attention_case_117(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_117(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em><strong>foo</strong></em></p>"/utf8>>},
        markdown:to_html(<<"___foo___"/utf8>>),
        "should support strong directly in emphasis w/ `_`"
    ),
    ok.

-spec test_attention_case_118(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_118(_Config) ->
    %% Rule 15.
    ?assertMatch(
        {ok, <<"<p><em>foo _bar</em> baz_</p>"/utf8>>},
        markdown:to_html(<<"*foo _bar* baz_"/utf8>>),
        "should not support mismatched emphasis"
    ),
    ok.

-spec test_attention_case_119(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_119(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>foo <strong>bar *baz bim</strong> bam</em></p>"/utf8>>},
        markdown:to_html(<<"*foo __bar *baz bim__ bam*"/utf8>>),
        "should not support mismatched strong emphasis"
    ),
    ok.

-spec test_attention_case_120(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_120(_Config) ->
    %% Rule 16.
    ?assertMatch(
        {ok, <<"<p>**foo <strong>bar baz</strong></p>"/utf8>>},
        markdown:to_html(<<"**foo **bar baz**"/utf8>>),
        "should not shortest strong possible"
    ),
    ok.

-spec test_attention_case_121(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_121(_Config) ->
    ?assertMatch(
        {ok, <<"<p>*foo <em>bar baz</em></p>"/utf8>>},
        markdown:to_html(<<"*foo *bar baz*"/utf8>>),
        "should not shortest emphasis possible"
    ),
    ok.

-spec test_attention_case_122(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_122(_Config) ->
    %% Rule 17.
    ?assertMatch(
        {ok, <<"<p>*<a href=\"/url\">bar*</a></p>"/utf8>>},
        markdown:to_html(<<"*[bar*](/url)"/utf8>>),
        "should not mismatch inside links (1)"
    ),
    ok.

-spec test_attention_case_123(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_123(_Config) ->
    ?assertMatch(
        {ok, <<"<p>_<a href=\"/url\">bar_</a></p>"/utf8>>},
        markdown:to_html(<<"_[bar_](/url)"/utf8>>),
        "should not mismatch inside links (1)"
    ),
    ok.

-spec test_attention_case_124(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_124(_Config) ->
    ?assertMatch(
        {ok, <<"<p>*<img src=\"foo\" title=\"*\"/></p>"/utf8>>},
        markdown:to_html_with_options(<<"*<img src=\"foo\" title=\"*\"/>"/utf8>>, ?danger),
        "should not end inside HTML"
    ),
    ok.

-spec test_attention_case_125(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_125(_Config) ->
    ?assertMatch(
        {ok, <<"<p>*<img src=\"foo\" title=\"*\"/></p>"/utf8>>},
        markdown:to_html_with_options(<<"*<img src=\"foo\" title=\"*\"/>"/utf8>>, ?danger),
        "should not end emphasis inside HTML"
    ),
    ok.

-spec test_attention_case_126(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_126(_Config) ->
    ?assertMatch(
        {ok, <<"<p>**<a href=\"**\"></p>"/utf8>>},
        markdown:to_html_with_options(<<"**<a href=\"**\">"/utf8>>, ?danger),
        "should not end strong inside HTML (1)"
    ),
    ok.

-spec test_attention_case_127(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_127(_Config) ->
    ?assertMatch(
        {ok, <<"<p>__<a href=\"__\"></p>"/utf8>>},
        markdown:to_html_with_options(<<"__<a href=\"__\">"/utf8>>, ?danger),
        "should not end strong inside HTML (2)"
    ),
    ok.

-spec test_attention_case_128(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_128(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>a <code>*</code></em></p>"/utf8>>},
        markdown:to_html(<<"*a `*`*"/utf8>>),
        "should not end emphasis inside code (1)"
    ),
    ok.

-spec test_attention_case_129(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_129(_Config) ->
    ?assertMatch(
        {ok, <<"<p><em>a <code>_</code></em></p>"/utf8>>},
        markdown:to_html(<<"_a `_`_"/utf8>>),
        "should not end emphasis inside code (2)"
    ),
    ok.

-spec test_attention_case_130(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_130(_Config) ->
    ?assertMatch(
        {ok, <<"<p>**a<a href=\"http://foo.bar/?q=**\">http://foo.bar/?q=**</a></p>"/utf8>>},
        markdown:to_html(<<"**a<http://foo.bar/?q=**>"/utf8>>),
        "should not end strong emphasis inside autolinks (1)"
    ),
    ok.

-spec test_attention_case_131(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_131(_Config) ->
    ?assertMatch(
        {ok, <<"<p>__a<a href=\"http://foo.bar/?q=__\">http://foo.bar/?q=__</a></p>"/utf8>>},
        markdown:to_html(<<"__a<http://foo.bar/?q=__>"/utf8>>),
        "should not end strong emphasis inside autolinks (2)"
    ),
    ok.

-spec test_attention_case_132(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_132(_Config) ->
    ?assertMatch(
        {ok, <<"<p>*a*</p>"/utf8>>},
        markdown:to_html_with_options(
            <<"*a*"/utf8>>, markdown_options:new(#{parse => #{constructs => #{attention => false}}})
        ),
        "should support turning off attention"
    ),
    ok.

-spec test_attention_case_133(Config) -> markdown_test:testcase() when
    Config :: ct_suite:ct_config().
test_attention_case_133(_Config) ->
    ?assertEqual(
        {ok,
            markdown_mdast_node:root(#markdown_mdast_root{
                children = ?'vec!'([
                    markdown_mdast_node:paragraph(#markdown_mdast_paragraph{
                        children = ?'vec!'([
                            markdown_mdast_node:text(#markdown_mdast_text{
                                value = <<"a ">>,
                                position = {some, markdown_unist_position:new(1, 1, 0, 1, 3, 2)}
                            }),
                            markdown_mdast_node:emphasis(#markdown_mdast_emphasis{
                                children = ?'vec!'([
                                    markdown_mdast_node:text(#markdown_mdast_text{
                                        value = <<"alpha">>,
                                        position = {some, markdown_unist_position:new(1, 4, 3, 1, 9, 8)}
                                    })
                                ]),
                                position = {some, markdown_unist_position:new(1, 3, 2, 1, 10, 9)}
                            }),
                            markdown_mdast_node:text(#markdown_mdast_text{
                                value = <<" b ">>,
                                position = {some, markdown_unist_position:new(1, 10, 9, 1, 13, 12)}
                            }),
                            markdown_mdast_node:strong(#markdown_mdast_strong{
                                children = ?'vec!'([
                                    markdown_mdast_node:text(#markdown_mdast_text{
                                        value = <<"bravo">>,
                                        position = {some, markdown_unist_position:new(1, 15, 14, 1, 20, 19)}
                                    })
                                ]),
                                position = {some, markdown_unist_position:new(1, 13, 12, 1, 22, 21)}
                            }),
                            markdown_mdast_node:text(#markdown_mdast_text{
                                value = <<" c.">>,
                                position = {some, markdown_unist_position:new(1, 22, 21, 1, 25, 24)}
                            })
                        ]),
                        position = {some, markdown_unist_position:new(1, 1, 0, 1, 25, 24)}
                    })
                ]),
                position = {some, markdown_unist_position:new(1, 1, 0, 1, 25, 24)}
            })},
        markdown:to_mdast(<<"a *alpha* b **bravo** c."/utf8>>, markdown_parse_options:new(#{})),
        "should support attention as `Emphasis`, `Strong`s in mdast"
    ),
    ok.
