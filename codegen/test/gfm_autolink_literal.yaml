# yaml-language-server: $schema=./schema.json

# Copyright (c) Meta Platforms, Inc. and affiliates.
# Copyright (c) WhatsApp LLC
#
# This source code is licensed under the MIT license found in the
# LICENSE.md file in the root directory of this source tree.

---
suite:
  name: gfm_autolink_literal
  created: 2025-10-03
  modified: 2025-10-03
to_html:
- name: test_gfm_autolink_literal_case_1
  input: https://example.com
  output: <p>https://example.com</p>
  message: should ignore protocol urls by default
- name: test_gfm_autolink_literal_case_2
  input: www.example.com
  output: <p>www.example.com</p>
  message: should ignore www urls by default
- name: test_gfm_autolink_literal_case_3
  input: user@example.com
  output: <p>user@example.com</p>
  message: should ignore email urls by default
to_html_with_options:
- name: test_gfm_autolink_literal_case_4
  input: https://example.com
  output: "<p><a href=\"https://example.com\">https://example.com</a></p>"
  message: should support protocol urls if enabled
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_5
  input: www.example.com
  output: "<p><a href=\"http://www.example.com\">www.example.com</a></p>"
  message: should support www urls if enabled
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_6
  input: user@example.com
  output: "<p><a href=\"mailto:user@example.com\">user@example.com</a></p>"
  message: should support email urls if enabled
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_7
  input: '[https://example.com](xxx)'
  output: "<p><a href=\"xxx\">https://example.com</a></p>"
  message: should not link protocol urls in links
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_8
  input: '[www.example.com](xxx)'
  output: "<p><a href=\"xxx\">www.example.com</a></p>"
  message: should not link www urls in links
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_9
  input: '[user@example.com](xxx)'
  output: "<p><a href=\"xxx\">user@example.com</a></p>"
  message: should not link email urls in links
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_10
  input: user@example.com
  output: "<p><a href=\"mailto:user@example.com\">user@example.com</a></p>"
  message: should support a closing paren at TLD (email)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_11
  input: www.a.)
  output: "<p><a href=\"http://www.a\">www.a</a>.)</p>"
  message: should support a closing paren at TLD (www)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_12
  input: www.a b
  output: "<p><a href=\"http://www.a\">www.a</a> b</p>"
  message: should support no TLD
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_13
  input: www.a/b c
  output: "<p><a href=\"http://www.a/b\">www.a/b</a> c</p>"
  message: should support a path instead of TLD
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_14
  input: www.�a
  output: "<p><a href=\"http://www.%EF%BF%BDa\">www.�a</a></p>"
  message: should support a replacement character in a domain
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_15
  input: http://點看.com
  output: "<p><a href=\"http://%E9%BB%9E%E7%9C%8B.com\">http://點看.com</a></p>"
  message: should support non-ascii characters in a domain (http)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_16
  input: www.點看.com
  output: "<p><a href=\"http://www.%E9%BB%9E%E7%9C%8B.com\">www.點看.com</a></p>"
  message: should support non-ascii characters in a domain (www)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_17
  input: 點看@example.com
  output: <p>點看@example.com</p>
  message: should *not* support non-ascii characters in atext (email)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_18
  input: example@點看.com
  output: <p>example@點看.com</p>
  message: should *not* support non-ascii characters in a domain (email)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_19
  input: www.a.com/點看
  output: "<p><a href=\"http://www.a.com/%E9%BB%9E%E7%9C%8B\">www.a.com/點看</a></p>"
  message: should support non-ascii characters in a path
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_20
  input: www.-a.b
  output: "<p><a href=\"http://www.-a.b\">www.-a.b</a></p>"
  message: should support a dash to start a domain
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_21
  input: www.$
  output: "<p><a href=\"http://www.$\">www.$</a></p>"
  message: should support a dollar as a domain name
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_22
  input: www.a..b.c
  output: "<p><a href=\"http://www.a..b.c\">www.a..b.c</a></p>"
  message: should support adjacent dots in a domain name
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_23
  input: www.a&a;
  output: "<p><a href=\"http://www.a\">www.a</a>&amp;a;</p>"
  message: should support named character references in domains
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_24
  input: https://a.bc/d/e/).
  output: "<p><a href=\"https://a.bc/d/e/\">https://a.bc/d/e/</a>).</p>"
  message: should support a closing paren and period after a path
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_25
  input: https://a.bc/d/e/.)
  output: "<p><a href=\"https://a.bc/d/e/\">https://a.bc/d/e/</a>.)</p>"
  message: should support a period and closing paren after a path
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_26
  input: https://a.bc).
  output: "<p><a href=\"https://a.bc\">https://a.bc</a>).</p>"
  message: should support a closing paren and period after a domain
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_27
  input: https://a.bc.)
  output: "<p><a href=\"https://a.bc\">https://a.bc</a>.)</p>"
  message: should support a period and closing paren after a domain
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_28
  input: https://a.bc).d
  output: "<p><a href=\"https://a.bc).d\">https://a.bc).d</a></p>"
  message: should support a closing paren and period in a path
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_29
  input: https://a.bc.)d
  output: "<p><a href=\"https://a.bc.)d\">https://a.bc.)d</a></p>"
  message: should support a period and closing paren in a path
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_30
  input: https://a.bc/))d
  output: "<p><a href=\"https://a.bc/))d\">https://a.bc/))d</a></p>"
  message: should support two closing parens in a path
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_31
  input: ftp://a/b/c.txt
  output: <p>ftp://a/b/c.txt</p>
  message: should not support ftp links
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_32
  input: ，https://example.com
  output: "<p>，<a href=\"https://example.com\">https://example.com</a></p>"
  message: should support http links after Unicode punctuation
  comment: "Note: GH comments/issues/PRs do not link this, but Gists/readmes do. Fixing it would mean deviating from `cmark-gfm`:\
    \ Source: <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L156>. assert_eq!( to_html_with_options(\"\
    ，www.example.com\", &Options::gfm())?, \"<p>，<a href=\"http://www.example.com\">www.example.com</a></p>\", \"should\
    \ support www links after Unicode punctuation\", );"
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_33
  input: ，example@example.com
  output: "<p>，<a href=\"mailto:example@example.com\">example@example.com</a></p>"
  message: should support email links after Unicode punctuation
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_34
  input: http&#x3A;//user:password@host:port/path?key=value#fragment
  output: <p>http://user:password@host:port/path?key=value#fragment</p>
  message: should not link character reference for `:`
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_35
  input: http://example.com/ab<cd
  output: "<p><a href=\"http://example.com/ab\">http://example.com/ab</a>&lt;cd</p>"
  message: should stop domains/paths at `<`
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_36
  input: |2-

    mailto:scyther@pokemon.com

    This is a mailto:scyther@pokemon.com

    mailto:scyther@pokemon.com.

    mmmmailto:scyther@pokemon.com

    mailto:scyther@pokemon.com/

    mailto:scyther@pokemon.com/message

    mailto:scyther@pokemon.com/mailto:beedrill@pokemon.com

    xmpp:scyther@pokemon.com

    xmpp:scyther@pokemon.com.

    xmpp:scyther@pokemon.com/message

    xmpp:scyther@pokemon.com/message.

    Email me at:scyther@pokemon.com
  output: |-
    <p><a href="mailto:scyther@pokemon.com">mailto:scyther@pokemon.com</a></p>
    <p>This is a <a href="mailto:scyther@pokemon.com">mailto:scyther@pokemon.com</a></p>
    <p><a href="mailto:scyther@pokemon.com">mailto:scyther@pokemon.com</a>.</p>
    <p>mmmmailto:<a href="mailto:scyther@pokemon.com">scyther@pokemon.com</a></p>
    <p><a href="mailto:scyther@pokemon.com">mailto:scyther@pokemon.com</a>/</p>
    <p><a href="mailto:scyther@pokemon.com">mailto:scyther@pokemon.com</a>/message</p>
    <p><a href="mailto:scyther@pokemon.com">mailto:scyther@pokemon.com</a>/<a href="mailto:beedrill@pokemon.com">mailto:beedrill@pokemon.com</a></p>
    <p><a href="xmpp:scyther@pokemon.com">xmpp:scyther@pokemon.com</a></p>
    <p><a href="xmpp:scyther@pokemon.com">xmpp:scyther@pokemon.com</a>.</p>
    <p><a href="xmpp:scyther@pokemon.com/message">xmpp:scyther@pokemon.com/message</a></p>
    <p><a href="xmpp:scyther@pokemon.com/message">xmpp:scyther@pokemon.com/message</a>.</p>
    <p>Email me at:<a href="mailto:scyther@pokemon.com">scyther@pokemon.com</a></p>
  message: should support `mailto:` and `xmpp:` protocols
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_37
  input: |2

    a www.example.com&xxx;b c

    a www.example.com&xxx;. b

    a www.example.com&xxxxxxxxx;. b

    a www.example.com&xxxxxxxxxx;. b

    a www.example.com&xxxxxxxxxxx;. b

    a www.example.com&xxx. b

    a www.example.com&#123. b

    a www.example.com&123. b

    a www.example.com&x. b

    a www.example.com&#1. b

    a www.example.com&1. b

    a www.example.com&. b

    a www.example.com& b
  output: |
    <p>a <a href="http://www.example.com&amp;xxx;b">www.example.com&amp;xxx;b</a> c</p>
    <p>a <a href="http://www.example.com">www.example.com</a>&amp;xxx;. b</p>
    <p>a <a href="http://www.example.com">www.example.com</a>&amp;xxxxxxxxx;. b</p>
    <p>a <a href="http://www.example.com">www.example.com</a>&amp;xxxxxxxxxx;. b</p>
    <p>a <a href="http://www.example.com">www.example.com</a>&amp;xxxxxxxxxxx;. b</p>
    <p>a <a href="http://www.example.com&amp;xxx">www.example.com&amp;xxx</a>. b</p>
    <p>a <a href="http://www.example.com&amp;#123">www.example.com&amp;#123</a>. b</p>
    <p>a <a href="http://www.example.com&amp;123">www.example.com&amp;123</a>. b</p>
    <p>a <a href="http://www.example.com&amp;x">www.example.com&amp;x</a>. b</p>
    <p>a <a href="http://www.example.com&amp;#1">www.example.com&amp;#1</a>. b</p>
    <p>a <a href="http://www.example.com&amp;1">www.example.com&amp;1</a>. b</p>
    <p>a <a href="http://www.example.com&amp;">www.example.com&amp;</a>. b</p>
    <p>a <a href="http://www.example.com&amp;">www.example.com&amp;</a> b</p>
  message: should match “character references” like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_38
  input: |2

    [ www.example.com

    [ https://example.com

    [ contact@example.com

    [ www.example.com ]

    [ https://example.com ]

    [ contact@example.com ]

    [ www.example.com ](#)

    [ https://example.com ](#)

    [ contact@example.com ](#)

    ![ www.example.com ](#)

    ![ https://example.com ](#)

    ![ contact@example.com ](#)
  output: |
    <p>[ <a href="http://www.example.com">www.example.com</a></p>
    <p>[ <a href="https://example.com">https://example.com</a></p>
    <p>[ <a href="mailto:contact@example.com">contact@example.com</a></p>
    <p>[ <a href="http://www.example.com">www.example.com</a> ]</p>
    <p>[ <a href="https://example.com">https://example.com</a> ]</p>
    <p>[ <a href="mailto:contact@example.com">contact@example.com</a> ]</p>
    <p><a href="#"> www.example.com </a></p>
    <p><a href="#"> https://example.com </a></p>
    <p><a href="#"> contact@example.com </a></p>
    <p><img src="#" alt=" www.example.com " /></p>
    <p><img src="#" alt=" https://example.com " /></p>
    <p><img src="#" alt=" contact@example.com " /></p>
  message: "should match interplay with brackets, links, and images, like GitHub does (but without the bugs)"
  comment: "Note: this deviates from GFM, as <https://github.com/github/cmark-gfm/issues/278> is fixed."
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_39
  input: |2

    www.example.com/?=a(b)cccccc

    www.example.com/?=a(b(c)ccccc

    www.example.com/?=a(b(c)c)cccc

    www.example.com/?=a(b(c)c)c)ccc

    www.example.com/?q=a(business)

    www.example.com/?q=a(business)))

    (www.example.com/?q=a(business))

    (www.example.com/?q=a(business)

    www.example.com/?q=a(business)".

    www.example.com/?q=a(business)))

    (www.example.com/?q=a(business))".

    (www.example.com/?q=a(business)".)

    (www.example.com/?q=a(business)".
  output: |
    <p><a href="http://www.example.com/?=a(b)cccccc">www.example.com/?=a(b)cccccc</a></p>
    <p><a href="http://www.example.com/?=a(b(c)ccccc">www.example.com/?=a(b(c)ccccc</a></p>
    <p><a href="http://www.example.com/?=a(b(c)c)cccc">www.example.com/?=a(b(c)c)cccc</a></p>
    <p><a href="http://www.example.com/?=a(b(c)c)c)ccc">www.example.com/?=a(b(c)c)c)ccc</a></p>
    <p><a href="http://www.example.com/?q=a(business)">www.example.com/?q=a(business)</a></p>
    <p><a href="http://www.example.com/?q=a(business)">www.example.com/?q=a(business)</a>))</p>
    <p>(<a href="http://www.example.com/?q=a(business)">www.example.com/?q=a(business)</a>)</p>
    <p>(<a href="http://www.example.com/?q=a(business)">www.example.com/?q=a(business)</a></p>
    <p><a href="http://www.example.com/?q=a(business)">www.example.com/?q=a(business)</a>&quot;.</p>
    <p><a href="http://www.example.com/?q=a(business)">www.example.com/?q=a(business)</a>))</p>
    <p>(<a href="http://www.example.com/?q=a(business)">www.example.com/?q=a(business)</a>)&quot;.</p>
    <p>(<a href="http://www.example.com/?q=a(business)">www.example.com/?q=a(business)</a>&quot;.)</p>
    <p>(<a href="http://www.example.com/?q=a(business)">www.example.com/?q=a(business)</a>&quot;.</p>
  message: should match parens like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_40
  input: |2

    # Literal autolinks

    ## WWW autolinks

    w.commonmark.org

    ww.commonmark.org

    www.commonmark.org

    Www.commonmark.org

    wWw.commonmark.org

    wwW.commonmark.org

    WWW.COMMONMARK.ORG

    Visit www.commonmark.org/help for more information.

    Visit www.commonmark.org.

    Visit www.commonmark.org/a.b.

    www.aaa.bbb.ccc_ccc

    www.aaa_bbb.ccc

    www.aaa.bbb.ccc.ddd_ddd

    www.aaa.bbb.ccc_ccc.ddd

    www.aaa.bbb_bbb.ccc.ddd

    www.aaa_aaa.bbb.ccc.ddd

    Visit www.commonmark.org.

    Visit www.commonmark.org/a.b.

    www.google.com/search?q=Markup+(business)

    www.google.com/search?q=Markup+(business)))

    (www.google.com/search?q=Markup+(business))

    (www.google.com/search?q=Markup+(business)

    www.google.com/search?q=(business))+ok

    www.google.com/search?q=commonmark&hl=en

    www.google.com/search?q=commonmark&hl;en

    www.google.com/search?q=commonmark&hl;

    www.commonmark.org/he<lp

    ## HTTP autolinks

    hexample.com

    htexample.com

    httexample.com

    httpexample.com

    http:example.com

    http:/example.com

    https:/example.com

    http://example.com

    https://example.com

    https://example

    http://commonmark.org

    (Visit https://encrypted.google.com/search?q=Markup+(business))

    ## Email autolinks

    No dot: foo@barbaz

    No dot: foo@barbaz.

    foo@bar.baz

    hello@mail+xyz.example isn’t valid, but hello+xyz@mail.example is.

    a.b-c_d@a.b

    a.b-c_d@a.b.

    a.b-c_d@a.b-

    a.b-c_d@a.b_

    a@a_b.c

    a@a-b.c

    Can’t end in an underscore followed by a period: aaa@a.b_.

    Can contain an underscore followed by a period: aaa@a.b_.c

    ## Link text should not be expanded

    [Visit www.example.com](http://www.example.com) please.

    [Visit http://www.example.com](http://www.example.com) please.

    [Mail example@example.com](mailto:example@example.com) please.

    [link]() <http://autolink> should still be expanded.
  output: |
    <h1>Literal autolinks</h1>
    <h2>WWW autolinks</h2>
    <p>w.commonmark.org</p>
    <p>ww.commonmark.org</p>
    <p><a href="http://www.commonmark.org">www.commonmark.org</a></p>
    <p><a href="http://Www.commonmark.org">Www.commonmark.org</a></p>
    <p><a href="http://wWw.commonmark.org">wWw.commonmark.org</a></p>
    <p><a href="http://wwW.commonmark.org">wwW.commonmark.org</a></p>
    <p><a href="http://WWW.COMMONMARK.ORG">WWW.COMMONMARK.ORG</a></p>
    <p>Visit <a href="http://www.commonmark.org/help">www.commonmark.org/help</a> for more information.</p>
    <p>Visit <a href="http://www.commonmark.org">www.commonmark.org</a>.</p>
    <p>Visit <a href="http://www.commonmark.org/a.b">www.commonmark.org/a.b</a>.</p>
    <p>www.aaa.bbb.ccc_ccc</p>
    <p>www.aaa_bbb.ccc</p>
    <p>www.aaa.bbb.ccc.ddd_ddd</p>
    <p>www.aaa.bbb.ccc_ccc.ddd</p>
    <p><a href="http://www.aaa.bbb_bbb.ccc.ddd">www.aaa.bbb_bbb.ccc.ddd</a></p>
    <p><a href="http://www.aaa_aaa.bbb.ccc.ddd">www.aaa_aaa.bbb.ccc.ddd</a></p>
    <p>Visit <a href="http://www.commonmark.org">www.commonmark.org</a>.</p>
    <p>Visit <a href="http://www.commonmark.org/a.b">www.commonmark.org/a.b</a>.</p>
    <p><a href="http://www.google.com/search?q=Markup+(business)">www.google.com/search?q=Markup+(business)</a></p>
    <p><a href="http://www.google.com/search?q=Markup+(business)">www.google.com/search?q=Markup+(business)</a>))</p>
    <p>(<a href="http://www.google.com/search?q=Markup+(business)">www.google.com/search?q=Markup+(business)</a>)</p>
    <p>(<a href="http://www.google.com/search?q=Markup+(business)">www.google.com/search?q=Markup+(business)</a></p>
    <p><a href="http://www.google.com/search?q=(business))+ok">www.google.com/search?q=(business))+ok</a></p>
    <p><a href="http://www.google.com/search?q=commonmark&amp;hl=en">www.google.com/search?q=commonmark&amp;hl=en</a></p>
    <p><a href="http://www.google.com/search?q=commonmark&amp;hl;en">www.google.com/search?q=commonmark&amp;hl;en</a></p>
    <p><a href="http://www.google.com/search?q=commonmark">www.google.com/search?q=commonmark</a>&amp;hl;</p>
    <p><a href="http://www.commonmark.org/he">www.commonmark.org/he</a>&lt;lp</p>
    <h2>HTTP autolinks</h2>
    <p>hexample.com</p>
    <p>htexample.com</p>
    <p>httexample.com</p>
    <p>httpexample.com</p>
    <p>http:example.com</p>
    <p>http:/example.com</p>
    <p>https:/example.com</p>
    <p><a href="http://example.com">http://example.com</a></p>
    <p><a href="https://example.com">https://example.com</a></p>
    <p><a href="https://example">https://example</a></p>
    <p><a href="http://commonmark.org">http://commonmark.org</a></p>
    <p>(Visit <a href="https://encrypted.google.com/search?q=Markup+(business)">https://encrypted.google.com/search?q=Markup+(business)</a>)</p>
    <h2>Email autolinks</h2>
    <p>No dot: foo@barbaz</p>
    <p>No dot: foo@barbaz.</p>
    <p><a href="mailto:foo@bar.baz">foo@bar.baz</a></p>
    <p>hello@mail+xyz.example isn’t valid, but <a href="mailto:hello+xyz@mail.example">hello+xyz@mail.example</a> is.</p>
    <p><a href="mailto:a.b-c_d@a.b">a.b-c_d@a.b</a></p>
    <p><a href="mailto:a.b-c_d@a.b">a.b-c_d@a.b</a>.</p>
    <p>a.b-c_d@a.b-</p>
    <p>a.b-c_d@a.b_</p>
    <p><a href="mailto:a@a_b.c">a@a_b.c</a></p>
    <p><a href="mailto:a@a-b.c">a@a-b.c</a></p>
    <p>Can’t end in an underscore followed by a period: aaa@a.b_.</p>
    <p>Can contain an underscore followed by a period: <a href="mailto:aaa@a.b_.c">aaa@a.b_.c</a></p>
    <h2>Link text should not be expanded</h2>
    <p><a href="http://www.example.com">Visit www.example.com</a> please.</p>
    <p><a href="http://www.example.com">Visit http://www.example.com</a> please.</p>
    <p><a href="mailto:example@example.com">Mail example@example.com</a> please.</p>
    <p><a href="">link</a> <a href="http://autolink">http://autolink</a> should still be expanded.</p>
  message: should match base like GitHub does
  comment: "Note: this deviates from GFM. Here, the following issues are fixed: - <https://github.com/github/cmark-gfm/issues/280>"
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_41
  input: |
    H0.

    [https://a.com&copy;b

    [www.a.com&copy;b

    H1.

    []https://a.com&copy;b

    []www.a.com&copy;b

    H2.

    [] https://a.com&copy;b

    [] www.a.com&copy;b

    H3.

    [[https://a.com&copy;b

    [[www.a.com&copy;b

    H4.

    [[]https://a.com&copy;b

    [[]www.a.com&copy;b

    H5.

    [[]]https://a.com&copy;b

    [[]]www.a.com&copy;b
  output: |
    <p>H0.</p>
    <p>[<a href="https://a.com&amp;copy;b">https://a.com&amp;copy;b</a></p>
    <p>[<a href="http://www.a.com&amp;copy;b">www.a.com&amp;copy;b</a></p>
    <p>H1.</p>
    <p>[]<a href="https://a.com&amp;copy;b">https://a.com&amp;copy;b</a></p>
    <p>[]<a href="http://www.a.com&amp;copy;b">www.a.com&amp;copy;b</a></p>
    <p>H2.</p>
    <p>[] <a href="https://a.com&amp;copy;b">https://a.com&amp;copy;b</a></p>
    <p>[] <a href="http://www.a.com&amp;copy;b">www.a.com&amp;copy;b</a></p>
    <p>H3.</p>
    <p>[[<a href="https://a.com&amp;copy;b">https://a.com&amp;copy;b</a></p>
    <p>[[<a href="http://www.a.com&amp;copy;b">www.a.com&amp;copy;b</a></p>
    <p>H4.</p>
    <p>[[]<a href="https://a.com&amp;copy;b">https://a.com&amp;copy;b</a></p>
    <p>[[]<a href="http://www.a.com&amp;copy;b">www.a.com&amp;copy;b</a></p>
    <p>H5.</p>
    <p>[[]]<a href="https://a.com&amp;copy;b">https://a.com&amp;copy;b</a></p>
    <p>[[]]<a href="http://www.a.com&amp;copy;b">www.a.com&amp;copy;b</a></p>
  message: should match brackets like GitHub does (except for the bracket bug)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_42
  input: |
    Image start.

    ![https://a.com

    ![http://a.com

    ![www.a.com

    ![a@b.c

    Image start and label end.

    ![https://a.com]

    ![http://a.com]

    ![www.a.com]

    ![a@b.c]

    Image label with reference (note: GH cleans hashes here, but we keep them in).

    ![https://a.com][x]

    ![http://a.com][x]

    ![www.a.com][x]

    ![a@b.c][x]

    [x]: #

    Image label with resource.

    ![https://a.com]()

    ![http://a.com]()

    ![www.a.com]()

    ![a@b.c]()

    Autolink literal after image.

    ![a]() https://a.com

    ![a]() http://a.com

    ![a]() www.a.com

    ![a]() a@b.c
  output: |
    <p>Image start.</p>
    <p>![<a href="https://a.com">https://a.com</a></p>
    <p>![<a href="http://a.com">http://a.com</a></p>
    <p>![<a href="http://www.a.com">www.a.com</a></p>
    <p>![<a href="mailto:a@b.c">a@b.c</a></p>
    <p>Image start and label end.</p>
    <p>![<a href="https://a.com">https://a.com</a>]</p>
    <p>![<a href="http://a.com">http://a.com</a>]</p>
    <p>![<a href="http://www.a.com">www.a.com</a>]</p>
    <p>![<a href="mailto:a@b.c">a@b.c</a>]</p>
    <p>Image label with reference (note: GH cleans hashes here, but we keep them in).</p>
    <p><img src="#" alt="https://a.com" /></p>
    <p><img src="#" alt="http://a.com" /></p>
    <p><img src="#" alt="www.a.com" /></p>
    <p><img src="#" alt="a@b.c" /></p>
    <p>Image label with resource.</p>
    <p><img src="" alt="https://a.com" /></p>
    <p><img src="" alt="http://a.com" /></p>
    <p><img src="" alt="www.a.com" /></p>
    <p><img src="" alt="a@b.c" /></p>
    <p>Autolink literal after image.</p>
    <p><img src="" alt="a" /> <a href="https://a.com">https://a.com</a></p>
    <p><img src="" alt="a" /> <a href="http://a.com">http://a.com</a></p>
    <p><img src="" alt="a" /> <a href="http://www.a.com">www.a.com</a></p>
    <p><img src="" alt="a" /> <a href="mailto:a@b.c">a@b.c</a></p>
  message: "should match autolink literals combined w/ images like GitHub does (except for the bracket bug)"
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_43
  input: |
    Link start.

    [https://a.com

    [http://a.com

    [www.a.com

    [a@b.c

    Label end.

    https://a.com]

    http://a.com]

    www.a.com]

    a@b.c]

    Link start and label end.

    [https://a.com]

    [http://a.com]

    [www.a.com]

    [a@b.c]

    What naïvely seems like a label end (A).

    https://a.com`]`

    http://a.com`]`

    www.a.com`]`

    a@b.c`]`

    Link start and what naïvely seems like a balanced brace (B).

    [https://a.com`]`

    [http://a.com`]`

    [www.a.com`]`

    [a@b.c`]`

    What naïvely seems like a label end (C).

    https://a.com `]`

    http://a.com `]`

    www.a.com `]`

    a@b.c `]`

    Link start and what naïvely seems like a balanced brace (D).

    [https://a.com `]`

    [http://a.com `]`

    [www.a.com `]`

    [a@b.c `]`

    Link label with reference.

    [https://a.com][x]

    [http://a.com][x]

    [www.a.com][x]

    [a@b.c][x]

    [x]: #

    Link label with resource.

    [https://a.com]()

    [http://a.com]()

    [www.a.com]()

    [a@b.c]()

    More in link.

    [a https://b.com c]()

    [a http://b.com c]()

    [a www.b.com c]()

    [a b@c.d e]()

    Autolink literal after link.

    [a]() https://a.com

    [a]() http://a.com

    [a]() www.a.com

    [a]() a@b.c
  output: |
    <p>Link start.</p>
    <p>[<a href="https://a.com">https://a.com</a></p>
    <p>[<a href="http://a.com">http://a.com</a></p>
    <p>[<a href="http://www.a.com">www.a.com</a></p>
    <p>[<a href="mailto:a@b.c">a@b.c</a></p>
    <p>Label end.</p>
    <p><a href="https://a.com">https://a.com</a>]</p>
    <p><a href="http://a.com">http://a.com</a>]</p>
    <p><a href="http://www.a.com">www.a.com</a>]</p>
    <p><a href="mailto:a@b.c">a@b.c</a>]</p>
    <p>Link start and label end.</p>
    <p>[<a href="https://a.com">https://a.com</a>]</p>
    <p>[<a href="http://a.com">http://a.com</a>]</p>
    <p>[<a href="http://www.a.com">www.a.com</a>]</p>
    <p>[<a href="mailto:a@b.c">a@b.c</a>]</p>
    <p>What naïvely seems like a label end (A).</p>
    <p><a href="https://a.com%60%5D%60">https://a.com`]`</a></p>
    <p><a href="http://a.com%60%5D%60">http://a.com`]`</a></p>
    <p><a href="http://www.a.com%60%5D%60">www.a.com`]`</a></p>
    <p><a href="mailto:a@b.c">a@b.c</a><code>]</code></p>
    <p>Link start and what naïvely seems like a balanced brace (B).</p>
    <p>[<a href="https://a.com%60%5D%60">https://a.com`]`</a></p>
    <p>[<a href="http://a.com%60%5D%60">http://a.com`]`</a></p>
    <p>[<a href="http://www.a.com%60%5D%60">www.a.com`]`</a></p>
    <p>[<a href="mailto:a@b.c">a@b.c</a><code>]</code></p>
    <p>What naïvely seems like a label end (C).</p>
    <p><a href="https://a.com">https://a.com</a> <code>]</code></p>
    <p><a href="http://a.com">http://a.com</a> <code>]</code></p>
    <p><a href="http://www.a.com">www.a.com</a> <code>]</code></p>
    <p><a href="mailto:a@b.c">a@b.c</a> <code>]</code></p>
    <p>Link start and what naïvely seems like a balanced brace (D).</p>
    <p>[<a href="https://a.com">https://a.com</a> <code>]</code></p>
    <p>[<a href="http://a.com">http://a.com</a> <code>]</code></p>
    <p>[<a href="http://www.a.com">www.a.com</a> <code>]</code></p>
    <p>[<a href="mailto:a@b.c">a@b.c</a> <code>]</code></p>
    <p>Link label with reference.</p>
    <p><a href="#">https://a.com</a></p>
    <p><a href="#">http://a.com</a></p>
    <p><a href="#">www.a.com</a></p>
    <p><a href="#">a@b.c</a></p>
    <p>Link label with resource.</p>
    <p><a href="">https://a.com</a></p>
    <p><a href="">http://a.com</a></p>
    <p><a href="">www.a.com</a></p>
    <p><a href="">a@b.c</a></p>
    <p>More in link.</p>
    <p><a href="">a https://b.com c</a></p>
    <p><a href="">a http://b.com c</a></p>
    <p><a href="">a www.b.com c</a></p>
    <p><a href="">a b@c.d e</a></p>
    <p>Autolink literal after link.</p>
    <p><a href="">a</a> <a href="https://a.com">https://a.com</a></p>
    <p><a href="">a</a> <a href="http://a.com">http://a.com</a></p>
    <p><a href="">a</a> <a href="http://www.a.com">www.a.com</a></p>
    <p><a href="">a</a> <a href="mailto:a@b.c">a@b.c</a></p>
  message: "should match autolink literals combined w/ links like GitHub does (except for the bracket bug)"
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_44
  input: |
    # “character reference”

    www.a&b (space)

    www.a&b!

    www.a&b"

    www.a&b#

    www.a&b$

    www.a&b%

    www.a&b&

    www.a&b'

    www.a&b(

    www.a&b)

    www.a&b*

    www.a&b+

    www.a&b,

    www.a&b-

    www.a&b

    www.a&b.

    www.a&b/

    www.a&b:

    www.a&b;

    www.a&b<

    www.a&b=

    www.a&b>

    www.a&b?

    www.a&b@

    www.a&b[

    www.a&b\

    www.a&b]

    www.a&b^

    www.a&b_

    www.a&b`

    www.a&b{

    www.a&b|

    www.a&b}

    www.a&b~
  output: |
    <h1>“character reference”</h1>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a> (space)</p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>!</p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>&quot;</p>
    <p><a href="http://www.a&amp;b#">www.a&amp;b#</a></p>
    <p><a href="http://www.a&amp;b$">www.a&amp;b$</a></p>
    <p><a href="http://www.a&amp;b%25">www.a&amp;b%</a></p>
    <p><a href="http://www.a&amp;b&amp;">www.a&amp;b&amp;</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>'</p>
    <p><a href="http://www.a&amp;b(">www.a&amp;b(</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>)</p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>*</p>
    <p><a href="http://www.a&amp;b+">www.a&amp;b+</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>,</p>
    <p><a href="http://www.a&amp;b-">www.a&amp;b-</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>.</p>
    <p><a href="http://www.a&amp;b/">www.a&amp;b/</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>:</p>
    <p><a href="http://www.a">www.a</a>&amp;b;</p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>&lt;</p>
    <p><a href="http://www.a&amp;b=">www.a&amp;b=</a></p>
    <p><a href="http://www.a&amp;b%3E">www.a&amp;b&gt;</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>?</p>
    <p><a href="http://www.a&amp;b@">www.a&amp;b@</a></p>
    <p><a href="http://www.a&amp;b%5B">www.a&amp;b[</a></p>
    <p><a href="http://www.a&amp;b%5C">www.a&amp;b\</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>]</p>
    <p><a href="http://www.a&amp;b%5E">www.a&amp;b^</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>_</p>
    <p><a href="http://www.a&amp;b%60">www.a&amp;b`</a></p>
    <p><a href="http://www.a&amp;b%7B">www.a&amp;b{</a></p>
    <p><a href="http://www.a&amp;b%7C">www.a&amp;b|</a></p>
    <p><a href="http://www.a&amp;b%7D">www.a&amp;b}</a></p>
    <p><a href="http://www.a&amp;b">www.a&amp;b</a>~</p>
  message: "should match “character references (named)” like GitHub does (except for the bracket bug)"
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_45
  input: |
    # “character reference”

    www.a&#35 (space)

    www.a&#35!

    www.a&#35"

    www.a&#35#

    www.a&#35$

    www.a&#35%

    www.a&#35&

    www.a&#35'

    www.a&#35(

    www.a&#35)

    www.a&#35*

    www.a&#35+

    www.a&#35,

    www.a&#35-

    www.a&#35

    www.a&#35.

    www.a&#35/

    www.a&#35:

    www.a&#35;

    www.a&#35<

    www.a&#35=

    www.a&#35>

    www.a&#35?

    www.a&#35@

    www.a&#35[

    www.a&#35\

    www.a&#35]

    www.a&#35^

    www.a&#35_

    www.a&#35`

    www.a&#35{

    www.a&#35|

    www.a&#35}

    www.a&#35~
  output: |
    <h1>“character reference”</h1>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a> (space)</p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>!</p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>&quot;</p>
    <p><a href="http://www.a&amp;#35#">www.a&amp;#35#</a></p>
    <p><a href="http://www.a&amp;#35$">www.a&amp;#35$</a></p>
    <p><a href="http://www.a&amp;#35%25">www.a&amp;#35%</a></p>
    <p><a href="http://www.a&amp;#35&amp;">www.a&amp;#35&amp;</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>'</p>
    <p><a href="http://www.a&amp;#35(">www.a&amp;#35(</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>)</p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>*</p>
    <p><a href="http://www.a&amp;#35+">www.a&amp;#35+</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>,</p>
    <p><a href="http://www.a&amp;#35-">www.a&amp;#35-</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>.</p>
    <p><a href="http://www.a&amp;#35/">www.a&amp;#35/</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>:</p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>;</p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>&lt;</p>
    <p><a href="http://www.a&amp;#35=">www.a&amp;#35=</a></p>
    <p><a href="http://www.a&amp;#35%3E">www.a&amp;#35&gt;</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>?</p>
    <p><a href="http://www.a&amp;#35@">www.a&amp;#35@</a></p>
    <p><a href="http://www.a&amp;#35%5B">www.a&amp;#35[</a></p>
    <p><a href="http://www.a&amp;#35%5C">www.a&amp;#35\</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>]</p>
    <p><a href="http://www.a&amp;#35%5E">www.a&amp;#35^</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>_</p>
    <p><a href="http://www.a&amp;#35%60">www.a&amp;#35`</a></p>
    <p><a href="http://www.a&amp;#35%7B">www.a&amp;#35{</a></p>
    <p><a href="http://www.a&amp;#35%7C">www.a&amp;#35|</a></p>
    <p><a href="http://www.a&amp;#35%7D">www.a&amp;#35}</a></p>
    <p><a href="http://www.a&amp;#35">www.a&amp;#35</a>~</p>
  message: "should match “character references (numeric)” like GitHub does (except for the bracket bug)"
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_46
  input: |
    a@0.0

    a@0.b

    a@a.29

    a@a.b

    a@0.0.c

    react@0.11.1

    react@0.12.0-rc1

    react@0.14.0-alpha1

    react@16.7.0-alpha.2

    react@0.0.0-experimental-aae83a4b9

    [ react@0.11.1

    [ react@0.12.0-rc1

    [ react@0.14.0-alpha1

    [ react@16.7.0-alpha.2

    [ react@0.0.0-experimental-aae83a4b9
  output: |
    <p>a@0.0</p>
    <p><a href="mailto:a@0.b">a@0.b</a></p>
    <p>a@a.29</p>
    <p><a href="mailto:a@a.b">a@a.b</a></p>
    <p><a href="mailto:a@0.0.c">a@0.0.c</a></p>
    <p>react@0.11.1</p>
    <p>react@0.12.0-rc1</p>
    <p>react@0.14.0-alpha1</p>
    <p>react@16.7.0-alpha.2</p>
    <p>react@0.0.0-experimental-aae83a4b9</p>
    <p>[ react@0.11.1</p>
    <p>[ react@0.12.0-rc1</p>
    <p>[ react@0.14.0-alpha1</p>
    <p>[ react@16.7.0-alpha.2</p>
    <p>[ react@0.0.0-experimental-aae83a4b9</p>
  message: should match email TLD digits like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_47
  input: |
    # httpshhh? (2)

    http://a (space)

    http://a!

    http://a"

    http://a#

    http://a$

    http://a%

    http://a&

    http://a'

    http://a(

    http://a)

    http://a*

    http://a+

    http://a,

    http://a-

    http://a

    http://a.

    http://a/

    http://a:

    http://a;

    http://a<

    http://a=

    http://a>

    http://a?

    http://a@

    http://a[

    http://a\

    http://a]

    http://a^

    http://a_

    http://a`

    http://a{

    http://a|

    http://a}

    http://a~
  output: |
    <h1>httpshhh? (2)</h1>
    <p><a href="http://a">http://a</a> (space)</p>
    <p><a href="http://a">http://a</a>!</p>
    <p><a href="http://a">http://a</a>&quot;</p>
    <p><a href="http://a#">http://a#</a></p>
    <p><a href="http://a$">http://a$</a></p>
    <p><a href="http://a%25">http://a%</a></p>
    <p><a href="http://a&amp;">http://a&amp;</a></p>
    <p><a href="http://a">http://a</a>'</p>
    <p><a href="http://a(">http://a(</a></p>
    <p><a href="http://a">http://a</a>)</p>
    <p><a href="http://a">http://a</a>*</p>
    <p><a href="http://a+">http://a+</a></p>
    <p><a href="http://a">http://a</a>,</p>
    <p><a href="http://a-">http://a-</a></p>
    <p><a href="http://a">http://a</a></p>
    <p><a href="http://a">http://a</a>.</p>
    <p><a href="http://a/">http://a/</a></p>
    <p><a href="http://a">http://a</a>:</p>
    <p><a href="http://a">http://a</a>;</p>
    <p><a href="http://a">http://a</a>&lt;</p>
    <p><a href="http://a=">http://a=</a></p>
    <p><a href="http://a%3E">http://a&gt;</a></p>
    <p><a href="http://a">http://a</a>?</p>
    <p><a href="http://a@">http://a@</a></p>
    <p><a href="http://a%5B">http://a[</a></p>
    <p><a href="http://a%5C">http://a\</a></p>
    <p><a href="http://a">http://a</a>]</p>
    <p><a href="http://a%5E">http://a^</a></p>
    <p><a href="http://a">http://a</a>_</p>
    <p><a href="http://a%60">http://a`</a></p>
    <p><a href="http://a%7B">http://a{</a></p>
    <p><a href="http://a%7C">http://a|</a></p>
    <p><a href="http://a%7D">http://a}</a></p>
    <p><a href="http://a">http://a</a>~</p>
  message: should match protocol domain continue like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_48
  input: |
    # httpshhh? (1)

    http:// (space)

    http://!

    http://"

    http://#

    http://$

    http://%

    http://&

    http://'

    http://(

    http://)

    http://*

    http://+

    http://,

    http://-

    http://

    http://.

    http:///

    http://:

    http://;

    http://<

    http://=

    http://>

    http://?

    http://@

    http://[

    http://\

    http://]

    http://^

    http://_

    http://`

    http://{

    http://|

    http://}

    http://~
  output: |
    <h1>httpshhh? (1)</h1>
    <p>http:// (space)</p>
    <p>http://!</p>
    <p>http://&quot;</p>
    <p>http://#</p>
    <p>http://$</p>
    <p>http://%</p>
    <p>http://&amp;</p>
    <p>http://'</p>
    <p>http://(</p>
    <p>http://)</p>
    <p>http://*</p>
    <p>http://+</p>
    <p>http://,</p>
    <p>http://-</p>
    <p>http://</p>
    <p>http://.</p>
    <p>http:///</p>
    <p>http://:</p>
    <p>http://;</p>
    <p>http://&lt;</p>
    <p>http://=</p>
    <p>http://&gt;</p>
    <p>http://?</p>
    <p>http://@</p>
    <p>http://[</p>
    <p>http://\</p>
    <p>http://]</p>
    <p>http://^</p>
    <p>http://_</p>
    <p>http://`</p>
    <p>http://{</p>
    <p>http://|</p>
    <p>http://}</p>
    <p>http://~</p>
  message: should match protocol domain start like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_49
  input: |
    # httpshhh? (4)

    http://a/b (space)

    http://a/b!

    http://a/b"

    http://a/b#

    http://a/b$

    http://a/b%

    http://a/b&

    http://a/b'

    http://a/b(

    http://a/b)

    http://a/b*

    http://a/b+

    http://a/b,

    http://a/b-

    http://a/b

    http://a/b.

    http://a/b/

    http://a/b:

    http://a/b;

    http://a/b<

    http://a/b=

    http://a/b>

    http://a/b?

    http://a/b@

    http://a/b[

    http://a/b\

    http://a/b]

    http://a/b^

    http://a/b_

    http://a/b`

    http://a/b{

    http://a/b|

    http://a/b}

    http://a/b~
  output: |
    <h1>httpshhh? (4)</h1>
    <p><a href="http://a/b">http://a/b</a> (space)</p>
    <p><a href="http://a/b">http://a/b</a>!</p>
    <p><a href="http://a/b">http://a/b</a>&quot;</p>
    <p><a href="http://a/b#">http://a/b#</a></p>
    <p><a href="http://a/b$">http://a/b$</a></p>
    <p><a href="http://a/b%25">http://a/b%</a></p>
    <p><a href="http://a/b&amp;">http://a/b&amp;</a></p>
    <p><a href="http://a/b">http://a/b</a>'</p>
    <p><a href="http://a/b(">http://a/b(</a></p>
    <p><a href="http://a/b">http://a/b</a>)</p>
    <p><a href="http://a/b">http://a/b</a>*</p>
    <p><a href="http://a/b+">http://a/b+</a></p>
    <p><a href="http://a/b">http://a/b</a>,</p>
    <p><a href="http://a/b-">http://a/b-</a></p>
    <p><a href="http://a/b">http://a/b</a></p>
    <p><a href="http://a/b">http://a/b</a>.</p>
    <p><a href="http://a/b/">http://a/b/</a></p>
    <p><a href="http://a/b">http://a/b</a>:</p>
    <p><a href="http://a/b">http://a/b</a>;</p>
    <p><a href="http://a/b">http://a/b</a>&lt;</p>
    <p><a href="http://a/b=">http://a/b=</a></p>
    <p><a href="http://a/b%3E">http://a/b&gt;</a></p>
    <p><a href="http://a/b">http://a/b</a>?</p>
    <p><a href="http://a/b@">http://a/b@</a></p>
    <p><a href="http://a/b%5B">http://a/b[</a></p>
    <p><a href="http://a/b%5C">http://a/b\</a></p>
    <p><a href="http://a/b">http://a/b</a>]</p>
    <p><a href="http://a/b%5E">http://a/b^</a></p>
    <p><a href="http://a/b">http://a/b</a>_</p>
    <p><a href="http://a/b%60">http://a/b`</a></p>
    <p><a href="http://a/b%7B">http://a/b{</a></p>
    <p><a href="http://a/b%7C">http://a/b|</a></p>
    <p><a href="http://a/b%7D">http://a/b}</a></p>
    <p><a href="http://a/b">http://a/b</a>~</p>
  message: should match protocol path continue like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_50
  input: |
    # httpshhh? (3)

    http://a/ (space)

    http://a/!

    http://a/"

    http://a/#

    http://a/$

    http://a/%

    http://a/&

    http://a/'

    http://a/(

    http://a/)

    http://a/*

    http://a/+

    http://a/,

    http://a/-

    http://a/

    http://a/.

    http://a//

    http://a/:

    http://a/;

    http://a/<

    http://a/=

    http://a/>

    http://a/?

    http://a/@

    http://a/[

    http://a/\

    http://a/]

    http://a/^

    http://a/_

    http://a/`

    http://a/{

    http://a/|

    http://a/}

    http://a/~
  output: |
    <h1>httpshhh? (3)</h1>
    <p><a href="http://a/">http://a/</a> (space)</p>
    <p><a href="http://a/">http://a/</a>!</p>
    <p><a href="http://a/">http://a/</a>&quot;</p>
    <p><a href="http://a/#">http://a/#</a></p>
    <p><a href="http://a/$">http://a/$</a></p>
    <p><a href="http://a/%25">http://a/%</a></p>
    <p><a href="http://a/&amp;">http://a/&amp;</a></p>
    <p><a href="http://a/">http://a/</a>'</p>
    <p><a href="http://a/(">http://a/(</a></p>
    <p><a href="http://a/">http://a/</a>)</p>
    <p><a href="http://a/">http://a/</a>*</p>
    <p><a href="http://a/+">http://a/+</a></p>
    <p><a href="http://a/">http://a/</a>,</p>
    <p><a href="http://a/-">http://a/-</a></p>
    <p><a href="http://a/">http://a/</a></p>
    <p><a href="http://a/">http://a/</a>.</p>
    <p><a href="http://a//">http://a//</a></p>
    <p><a href="http://a/">http://a/</a>:</p>
    <p><a href="http://a/">http://a/</a>;</p>
    <p><a href="http://a/">http://a/</a>&lt;</p>
    <p><a href="http://a/=">http://a/=</a></p>
    <p><a href="http://a/%3E">http://a/&gt;</a></p>
    <p><a href="http://a/">http://a/</a>?</p>
    <p><a href="http://a/@">http://a/@</a></p>
    <p><a href="http://a/%5B">http://a/[</a></p>
    <p><a href="http://a/%5C">http://a/\</a></p>
    <p><a href="http://a/">http://a/</a>]</p>
    <p><a href="http://a/%5E">http://a/^</a></p>
    <p><a href="http://a/">http://a/</a>_</p>
    <p><a href="http://a/%60">http://a/`</a></p>
    <p><a href="http://a/%7B">http://a/{</a></p>
    <p><a href="http://a/%7C">http://a/|</a></p>
    <p><a href="http://a/%7D">http://a/}</a></p>
    <p><a href="http://a/">http://a/</a>~</p>
  message: should match protocol path start like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_51
  input: |
    [www.example.com/a&copy;](#)

    www.example.com/a&copy;

    [www.example.com/a&bogus;](#)

    www.example.com/a&bogus;

    [www.example.com/a\.](#)

    www.example.com/a\.
  output: |
    <p><a href="#">www.example.com/a©</a></p>
    <p><a href="http://www.example.com/a">www.example.com/a</a>©</p>
    <p><a href="#">www.example.com/a&amp;bogus;</a></p>
    <p><a href="http://www.example.com/a">www.example.com/a</a>&amp;bogus;</p>
    <p><a href="#">www.example.com/a\.</a></p>
    <p><a href="http://www.example.com/a%5C">www.example.com/a\</a>.</p>
  message: should match links, autolink literals, and characters like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_52
  input: |
    # “character reference”

    www.a/b&c (space)

    www.a/b&c!

    www.a/b&c"

    www.a/b&c#

    www.a/b&c$

    www.a/b&c%

    www.a/b&c&

    www.a/b&c'

    www.a/b&c(

    www.a/b&c)

    www.a/b&c*

    www.a/b&c+

    www.a/b&c,

    www.a/b&c-

    www.a/b&c

    www.a/b&c.

    www.a/b&c/

    www.a/b&c:

    www.a/b&c;

    www.a/b&c<

    www.a/b&c=

    www.a/b&c>

    www.a/b&c?

    www.a/b&c@

    www.a/b&c[

    www.a/b&c\

    www.a/b&c]

    www.a/b&c^

    www.a/b&c_

    www.a/b&c`

    www.a/b&c{

    www.a/b&c|

    www.a/b&c}

    www.a/b&c~
  output: |
    <h1>“character reference”</h1>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a> (space)</p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>!</p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>&quot;</p>
    <p><a href="http://www.a/b&amp;c#">www.a/b&amp;c#</a></p>
    <p><a href="http://www.a/b&amp;c$">www.a/b&amp;c$</a></p>
    <p><a href="http://www.a/b&amp;c%25">www.a/b&amp;c%</a></p>
    <p><a href="http://www.a/b&amp;c&amp;">www.a/b&amp;c&amp;</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>'</p>
    <p><a href="http://www.a/b&amp;c(">www.a/b&amp;c(</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>)</p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>*</p>
    <p><a href="http://www.a/b&amp;c+">www.a/b&amp;c+</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>,</p>
    <p><a href="http://www.a/b&amp;c-">www.a/b&amp;c-</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>.</p>
    <p><a href="http://www.a/b&amp;c/">www.a/b&amp;c/</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>:</p>
    <p><a href="http://www.a/b">www.a/b</a>&amp;c;</p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>&lt;</p>
    <p><a href="http://www.a/b&amp;c=">www.a/b&amp;c=</a></p>
    <p><a href="http://www.a/b&amp;c%3E">www.a/b&amp;c&gt;</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>?</p>
    <p><a href="http://www.a/b&amp;c@">www.a/b&amp;c@</a></p>
    <p><a href="http://www.a/b&amp;c%5B">www.a/b&amp;c[</a></p>
    <p><a href="http://www.a/b&amp;c%5C">www.a/b&amp;c\</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>]</p>
    <p><a href="http://www.a/b&amp;c%5E">www.a/b&amp;c^</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>_</p>
    <p><a href="http://www.a/b&amp;c%60">www.a/b&amp;c`</a></p>
    <p><a href="http://www.a/b&amp;c%7B">www.a/b&amp;c{</a></p>
    <p><a href="http://www.a/b&amp;c%7C">www.a/b&amp;c|</a></p>
    <p><a href="http://www.a/b&amp;c%7D">www.a/b&amp;c}</a></p>
    <p><a href="http://www.a/b&amp;c">www.a/b&amp;c</a>~</p>
  message: should match character reference-like (named) things in paths like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_53
  input: |
    # “character reference”

    www.a/b&#35 (space)

    www.a/b&#35!

    www.a/b&#35"

    www.a/b&#35#

    www.a/b&#35$

    www.a/b&#35%

    www.a/b&#35&

    www.a/b&#35'

    www.a/b&#35(

    www.a/b&#35)

    www.a/b&#35*

    www.a/b&#35+

    www.a/b&#35,

    www.a/b&#35-

    www.a/b&#35

    www.a/b&#35.

    www.a/b&#35/

    www.a/b&#35:

    www.a/b&#35;

    www.a/b&#35<

    www.a/b&#35=

    www.a/b&#35>

    www.a/b&#35?

    www.a/b&#35@

    www.a/b&#35[

    www.a/b&#35\

    www.a/b&#35]

    www.a/b&#35^

    www.a/b&#35_

    www.a/b&#35`

    www.a/b&#35{

    www.a/b&#35|

    www.a/b&#35}

    www.a/b&#35~
  output: |
    <h1>“character reference”</h1>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a> (space)</p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>!</p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>&quot;</p>
    <p><a href="http://www.a/b&amp;#35#">www.a/b&amp;#35#</a></p>
    <p><a href="http://www.a/b&amp;#35$">www.a/b&amp;#35$</a></p>
    <p><a href="http://www.a/b&amp;#35%25">www.a/b&amp;#35%</a></p>
    <p><a href="http://www.a/b&amp;#35&amp;">www.a/b&amp;#35&amp;</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>'</p>
    <p><a href="http://www.a/b&amp;#35(">www.a/b&amp;#35(</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>)</p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>*</p>
    <p><a href="http://www.a/b&amp;#35+">www.a/b&amp;#35+</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>,</p>
    <p><a href="http://www.a/b&amp;#35-">www.a/b&amp;#35-</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>.</p>
    <p><a href="http://www.a/b&amp;#35/">www.a/b&amp;#35/</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>:</p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>;</p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>&lt;</p>
    <p><a href="http://www.a/b&amp;#35=">www.a/b&amp;#35=</a></p>
    <p><a href="http://www.a/b&amp;#35%3E">www.a/b&amp;#35&gt;</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>?</p>
    <p><a href="http://www.a/b&amp;#35@">www.a/b&amp;#35@</a></p>
    <p><a href="http://www.a/b&amp;#35%5B">www.a/b&amp;#35[</a></p>
    <p><a href="http://www.a/b&amp;#35%5C">www.a/b&amp;#35\</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>]</p>
    <p><a href="http://www.a/b&amp;#35%5E">www.a/b&amp;#35^</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>_</p>
    <p><a href="http://www.a/b&amp;#35%60">www.a/b&amp;#35`</a></p>
    <p><a href="http://www.a/b&amp;#35%7B">www.a/b&amp;#35{</a></p>
    <p><a href="http://www.a/b&amp;#35%7C">www.a/b&amp;#35|</a></p>
    <p><a href="http://www.a/b&amp;#35%7D">www.a/b&amp;#35}</a></p>
    <p><a href="http://www.a/b&amp;#35">www.a/b&amp;#35</a>~</p>
  message: should match character reference-like (numeric) things in paths like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_54
  input: |
    In autolink literal path or link end?

    [https://a.com/d]()

    [http://a.com/d]()

    [www.a.com/d]()

    https://a.com/d]()

    http://a.com/d]()

    www.a.com/d]()

    In autolink literal search or link end?

    [https://a.com?d]()

    [http://a.com?d]()

    [www.a.com?d]()

    https://a.com?d]()

    http://a.com?d]()

    www.a.com?d]()

    In autolink literal hash or link end?

    [https://a.com#d]()

    [http://a.com#d]()

    [www.a.com#d]()

    https://a.com#d]()

    http://a.com#d]()

    www.a.com#d]()
  output: |
    <p>In autolink literal path or link end?</p>
    <p><a href="">https://a.com/d</a></p>
    <p><a href="">http://a.com/d</a></p>
    <p><a href="">www.a.com/d</a></p>
    <p><a href="https://a.com/d">https://a.com/d</a>]()</p>
    <p><a href="http://a.com/d">http://a.com/d</a>]()</p>
    <p><a href="http://www.a.com/d">www.a.com/d</a>]()</p>
    <p>In autolink literal search or link end?</p>
    <p><a href="">https://a.com?d</a></p>
    <p><a href="">http://a.com?d</a></p>
    <p><a href="">www.a.com?d</a></p>
    <p><a href="https://a.com?d">https://a.com?d</a>]()</p>
    <p><a href="http://a.com?d">http://a.com?d</a>]()</p>
    <p><a href="http://www.a.com?d">www.a.com?d</a>]()</p>
    <p>In autolink literal hash or link end?</p>
    <p><a href="">https://a.com#d</a></p>
    <p><a href="">http://a.com#d</a></p>
    <p><a href="">www.a.com#d</a></p>
    <p><a href="https://a.com#d">https://a.com#d</a>]()</p>
    <p><a href="http://a.com#d">http://a.com#d</a>]()</p>
    <p><a href="http://www.a.com#d">www.a.com#d</a>]()</p>
  message: should match path or link end like GitHub does (except for the bracket bug)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_55
  input: "Last non-markdown ASCII whitespace (FF): \fnoreply@example.com, \fhttp://example.com, \fhttps://example.com, \f\
    www.example.com\n\nLast non-whitespace ASCII control (US): \x1Fnoreply@example.com, \x1Fhttp://example.com, \x1Fhttps://example.com,\
    \ \x1Fwww.example.com\n\nFirst punctuation after controls: !noreply@example.com, !http://example.com, !https://example.com,\
    \ !www.example.com\n\nLast punctuation before digits: /noreply@example.com, /http://example.com, /https://example.com,\
    \ /www.example.com\n\nFirst digit: 0noreply@example.com, 0http://example.com, 0https://example.com, 0www.example.com\n\
    \nFirst punctuation after digits: :noreply@example.com, :http://example.com, :https://example.com, :www.example.com\n\n\
    Last punctuation before caps: @noreply@example.com, @http://example.com, @https://example.com, @www.example.com\n\nFirst\
    \ uppercase: Anoreply@example.com, Ahttp://example.com, Ahttps://example.com, Awww.example.com\n\nPunctuation after uppercase:\
    \ \\noreply@example.com, \\http://example.com, \\https://example.com, \\www.example.com\n\nLast punctuation before lowercase\
    \ (1): `noreply@example.com;\n\n(2) `http://example.com;\n\n(3) `https://example.com;\n\n(4) `www.example.com; (broken\
    \ up to prevent code from forming)\n\nFirst lowercase: anoreply@example.com, ahttp://example.com, ahttps://example.com,\
    \ awww.example.com\n\nFirst punctuation after lowercase: {noreply@example.com, {http://example.com, {https://example.com,\
    \ {www.example.com\n\nLast punctuation: ~noreply@example.com, ~http://example.com, ~https://example.com, ~www.example.com\n\
    \nFirst non-ASCII unicode whitespace (0x80): \Nnoreply@example.com, \Nhttp://example.com, \Nhttps://example.com, \Nwww.example.com\n\
    \nLast non-ASCII unicode whitespace (0x3000): 　noreply@example.com, 　http://example.com, 　https://example.com, 　www.example.com\n\
    \nFirst non-ASCII punctuation: ¡noreply@example.com, ¡http://example.com, ¡https://example.com, ¡www.example.com\n\nLast\
    \ non-ASCII punctuation: ･noreply@example.com, ･http://example.com, ･https://example.com, ･www.example.com\n\nSome non-ascii:\
    \ 中noreply@example.com, 中http://example.com, 中https://example.com, 中www.example.com\n\nSome more non-ascii: \U0001F937\
    ‍noreply@example.com, \U0001F937‍http://example.com, \U0001F937‍https://example.com, \U0001F937‍www.example.com\n"
  output: "<p>Last non-markdown ASCII whitespace (FF): \f<a href=\"mailto:noreply@example.com\">noreply@example.com</a>, \f\
    <a href=\"http://example.com\">http://example.com</a>, \f<a href=\"https://example.com\">https://example.com</a>, \fwww.example.com</p>\n\
    <p>Last non-whitespace ASCII control (US): \x1F<a href=\"mailto:noreply@example.com\">noreply@example.com</a>, \x1F<a\
    \ href=\"http://example.com\">http://example.com</a>, \x1F<a href=\"https://example.com\">https://example.com</a>, \x1F\
    www.example.com</p>\n<p>First punctuation after controls: !<a href=\"mailto:noreply@example.com\">noreply@example.com</a>,\
    \ !<a href=\"http://example.com\">http://example.com</a>, !<a href=\"https://example.com\">https://example.com</a>, !www.example.com</p>\n\
    <p>Last punctuation before digits: /noreply@example.com, /<a href=\"http://example.com\">http://example.com</a>, /<a href=\"\
    https://example.com\">https://example.com</a>, /www.example.com</p>\n<p>First digit: <a href=\"mailto:0noreply@example.com\"\
    >0noreply@example.com</a>, 0<a href=\"http://example.com\">http://example.com</a>, 0<a href=\"https://example.com\">https://example.com</a>,\
    \ 0www.example.com</p>\n<p>First punctuation after digits: :<a href=\"mailto:noreply@example.com\">noreply@example.com</a>,\
    \ :<a href=\"http://example.com\">http://example.com</a>, :<a href=\"https://example.com\">https://example.com</a>, :www.example.com</p>\n\
    <p>Last punctuation before caps: @<a href=\"mailto:noreply@example.com\">noreply@example.com</a>, @<a href=\"http://example.com\"\
    >http://example.com</a>, @<a href=\"https://example.com\">https://example.com</a>, @www.example.com</p>\n<p>First uppercase:\
    \ <a href=\"mailto:Anoreply@example.com\">Anoreply@example.com</a>, Ahttp://example.com, Ahttps://example.com, Awww.example.com</p>\n\
    <p>Punctuation after uppercase: \\<a href=\"mailto:noreply@example.com\">noreply@example.com</a>, \\<a href=\"http://example.com\"\
    >http://example.com</a>, \\<a href=\"https://example.com\">https://example.com</a>, \\www.example.com</p>\n<p>Last punctuation\
    \ before lowercase (1): `<a href=\"mailto:noreply@example.com\">noreply@example.com</a>;</p>\n<p>(2) `<a href=\"http://example.com\"\
    >http://example.com</a>;</p>\n<p>(3) `<a href=\"https://example.com\">https://example.com</a>;</p>\n<p>(4) `www.example.com;\
    \ (broken up to prevent code from forming)</p>\n<p>First lowercase: <a href=\"mailto:anoreply@example.com\">anoreply@example.com</a>,\
    \ ahttp://example.com, ahttps://example.com, awww.example.com</p>\n<p>First punctuation after lowercase: {<a href=\"mailto:noreply@example.com\"\
    >noreply@example.com</a>, {<a href=\"http://example.com\">http://example.com</a>, {<a href=\"https://example.com\">https://example.com</a>,\
    \ {www.example.com</p>\n<p>Last punctuation: ~<a href=\"mailto:noreply@example.com\">noreply@example.com</a>, ~<a href=\"\
    http://example.com\">http://example.com</a>, ~<a href=\"https://example.com\">https://example.com</a>, ~<a href=\"http://www.example.com\"\
    >www.example.com</a></p>\n<p>First non-ASCII unicode whitespace (0x80): \N<a href=\"mailto:noreply@example.com\">noreply@example.com</a>,\
    \ \N<a href=\"http://example.com\">http://example.com</a>, \N<a href=\"https://example.com\">https://example.com</a>,\
    \ \Nwww.example.com</p>\n<p>Last non-ASCII unicode whitespace (0x3000): 　<a href=\"mailto:noreply@example.com\">noreply@example.com</a>,\
    \ 　<a href=\"http://example.com\">http://example.com</a>, 　<a href=\"https://example.com\">https://example.com</a>, 　www.example.com</p>\n\
    <p>First non-ASCII punctuation: ¡<a href=\"mailto:noreply@example.com\">noreply@example.com</a>, ¡<a href=\"http://example.com\"\
    >http://example.com</a>, ¡<a href=\"https://example.com\">https://example.com</a>, ¡www.example.com</p>\n<p>Last non-ASCII\
    \ punctuation: ･<a href=\"mailto:noreply@example.com\">noreply@example.com</a>, ･<a href=\"http://example.com\">http://example.com</a>,\
    \ ･<a href=\"https://example.com\">https://example.com</a>, ･www.example.com</p>\n<p>Some non-ascii: 中<a href=\"mailto:noreply@example.com\"\
    >noreply@example.com</a>, 中<a href=\"http://example.com\">http://example.com</a>, 中<a href=\"https://example.com\">https://example.com</a>,\
    \ 中www.example.com</p>\n<p>Some more non-ascii: \U0001F937‍<a href=\"mailto:noreply@example.com\">noreply@example.com</a>,\
    \ \U0001F937‍<a href=\"http://example.com\">http://example.com</a>, \U0001F937‍<a href=\"https://example.com\">https://example.com</a>,\
    \ \U0001F937‍www.example.com</p>\n"
  message: should match previous (complex) like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_56
  input: "# HTTP\n\nhttps://a.b can start after EOF\n\nCan start after EOL:\nhttps://a.b\n\nCan start after tab:\thttps://a.b.\n\
    \nCan start after space: https://a.b.\n\nCan start after left paren (https://a.b.\n\nCan start after asterisk *https://a.b.\n\
    \nCan start after underscore *_https://a.b.\n\nCan start after tilde ~https://a.b.\n\n# www\n\nwww.a.b can start after\
    \ EOF\n\nCan start after EOL:\nwww.a.b\n\nCan start after tab:\twww.a.b.\n\nCan start after space: www.a.b.\n\nCan start\
    \ after left paren (www.a.b.\n\nCan start after asterisk *www.a.b.\n\nCan start after underscore *_www.a.b.\n\nCan start\
    \ after tilde ~www.a.b.\n\n# Email\n\n## Correct character before\n\na@b.c can start after EOF\n\nCan start after EOL:\n\
    a@b.c\n\nCan start after tab:\ta@b.c.\n\nCan start after space: a@b.c.\n\nCan start after left paren(a@b.c.\n\nCan start\
    \ after asterisk*a@b.c.\n\nWhile theoretically it’s possible to start at an underscore, that underscore\nis part of the\
    \ email, so it’s in fact part of the link: _a@b.c.\n\nCan start after tilde~a@b.c.\n\n## Others characters before\n\n\
    While other characters before the email aren’t allowed by GFM, they work on\ngithub.com: !a@b.c, \"a@b.c, #a@b.c, $a@b.c,\
    \ &a@b.c, 'a@b.c, )a@b.c, +a@b.c,\n,a@b.c, -a@b.c, .a@b.c, /a@b.c, :a@b.c, ;a@b.c, <a@b.c, =a@b.c, >a@b.c, ?a@b.c,\n@a@b.c,\
    \ \\a@b.c, ]a@b.c, ^a@b.c, `a@b.c, {a@b.c, }a@b.c.\n\n## Commas\n\nSee `https://github.com/remarkjs/remark/discussions/678`.\n\
    \n,https://github.com\n\n[ ,https://github.com\n\n[asd] ,https://github.com\n"
  output: "<h1>HTTP</h1>\n<p><a href=\"https://a.b\">https://a.b</a> can start after EOF</p>\n<p>Can start after EOL:\n<a\
    \ href=\"https://a.b\">https://a.b</a></p>\n<p>Can start after tab:\t<a href=\"https://a.b\">https://a.b</a>.</p>\n<p>Can\
    \ start after space: <a href=\"https://a.b\">https://a.b</a>.</p>\n<p>Can start after left paren (<a href=\"https://a.b\"\
    >https://a.b</a>.</p>\n<p>Can start after asterisk *<a href=\"https://a.b\">https://a.b</a>.</p>\n<p>Can start after underscore\
    \ *_<a href=\"https://a.b\">https://a.b</a>.</p>\n<p>Can start after tilde ~<a href=\"https://a.b\">https://a.b</a>.</p>\n\
    <h1>www</h1>\n<p><a href=\"http://www.a.b\">www.a.b</a> can start after EOF</p>\n<p>Can start after EOL:\n<a href=\"http://www.a.b\"\
    >www.a.b</a></p>\n<p>Can start after tab:\t<a href=\"http://www.a.b\">www.a.b</a>.</p>\n<p>Can start after space: <a href=\"\
    http://www.a.b\">www.a.b</a>.</p>\n<p>Can start after left paren (<a href=\"http://www.a.b\">www.a.b</a>.</p>\n<p>Can\
    \ start after asterisk *<a href=\"http://www.a.b\">www.a.b</a>.</p>\n<p>Can start after underscore *_<a href=\"http://www.a.b\"\
    >www.a.b</a>.</p>\n<p>Can start after tilde ~<a href=\"http://www.a.b\">www.a.b</a>.</p>\n<h1>Email</h1>\n<h2>Correct\
    \ character before</h2>\n<p><a href=\"mailto:a@b.c\">a@b.c</a> can start after EOF</p>\n<p>Can start after EOL:\n<a href=\"\
    mailto:a@b.c\">a@b.c</a></p>\n<p>Can start after tab:\t<a href=\"mailto:a@b.c\">a@b.c</a>.</p>\n<p>Can start after space:\
    \ <a href=\"mailto:a@b.c\">a@b.c</a>.</p>\n<p>Can start after left paren(<a href=\"mailto:a@b.c\">a@b.c</a>.</p>\n<p>Can\
    \ start after asterisk*<a href=\"mailto:a@b.c\">a@b.c</a>.</p>\n<p>While theoretically it’s possible to start at an underscore,\
    \ that underscore\nis part of the email, so it’s in fact part of the link: <a href=\"mailto:_a@b.c\">_a@b.c</a>.</p>\n\
    <p>Can start after tilde~<a href=\"mailto:a@b.c\">a@b.c</a>.</p>\n<h2>Others characters before</h2>\n<p>While other characters\
    \ before the email aren’t allowed by GFM, they work on\ngithub.com: !<a href=\"mailto:a@b.c\">a@b.c</a>, &quot;<a href=\"\
    mailto:a@b.c\">a@b.c</a>, #<a href=\"mailto:a@b.c\">a@b.c</a>, $<a href=\"mailto:a@b.c\">a@b.c</a>, &amp;<a href=\"mailto:a@b.c\"\
    >a@b.c</a>, '<a href=\"mailto:a@b.c\">a@b.c</a>, )<a href=\"mailto:a@b.c\">a@b.c</a>, <a href=\"mailto:+a@b.c\">+a@b.c</a>,\n\
    ,<a href=\"mailto:a@b.c\">a@b.c</a>, <a href=\"mailto:-a@b.c\">-a@b.c</a>, <a href=\"mailto:.a@b.c\">.a@b.c</a>, /a@b.c,\
    \ :<a href=\"mailto:a@b.c\">a@b.c</a>, ;<a href=\"mailto:a@b.c\">a@b.c</a>, &lt;<a href=\"mailto:a@b.c\">a@b.c</a>, =<a\
    \ href=\"mailto:a@b.c\">a@b.c</a>, &gt;<a href=\"mailto:a@b.c\">a@b.c</a>, ?<a href=\"mailto:a@b.c\">a@b.c</a>,\n@<a href=\"\
    mailto:a@b.c\">a@b.c</a>, \\<a href=\"mailto:a@b.c\">a@b.c</a>, ]<a href=\"mailto:a@b.c\">a@b.c</a>, ^<a href=\"mailto:a@b.c\"\
    >a@b.c</a>, `<a href=\"mailto:a@b.c\">a@b.c</a>, {<a href=\"mailto:a@b.c\">a@b.c</a>, }<a href=\"mailto:a@b.c\">a@b.c</a>.</p>\n\
    <h2>Commas</h2>\n<p>See <code>https://github.com/remarkjs/remark/discussions/678</code>.</p>\n<p>,<a href=\"https://github.com\"\
    >https://github.com</a></p>\n<p>[ ,<a href=\"https://github.com\">https://github.com</a></p>\n<p>[asd] ,<a href=\"https://github.com\"\
    >https://github.com</a></p>\n"
  message: should match previous like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_57
  input: |
    # wwwtf 2?

    www.a (space)

    www.a!

    www.a"

    www.a#

    www.a$

    www.a%

    www.a&

    www.a'

    www.a(

    www.a)

    www.a*

    www.a+

    www.a,

    www.a-

    www.a

    www.a.

    www.a/

    www.a:

    www.a;

    www.a<

    www.a=

    www.a>

    www.a?

    www.a@

    www.a[

    www.a\

    www.a]

    www.a^

    www.a_

    www.a`

    www.a{

    www.a|

    www.a}

    www.a~
  output: |
    <h1>wwwtf 2?</h1>
    <p><a href="http://www.a">www.a</a> (space)</p>
    <p><a href="http://www.a">www.a</a>!</p>
    <p><a href="http://www.a">www.a</a>&quot;</p>
    <p><a href="http://www.a#">www.a#</a></p>
    <p><a href="http://www.a$">www.a$</a></p>
    <p><a href="http://www.a%25">www.a%</a></p>
    <p><a href="http://www.a&amp;">www.a&amp;</a></p>
    <p><a href="http://www.a">www.a</a>'</p>
    <p><a href="http://www.a(">www.a(</a></p>
    <p><a href="http://www.a">www.a</a>)</p>
    <p><a href="http://www.a">www.a</a>*</p>
    <p><a href="http://www.a+">www.a+</a></p>
    <p><a href="http://www.a">www.a</a>,</p>
    <p><a href="http://www.a-">www.a-</a></p>
    <p><a href="http://www.a">www.a</a></p>
    <p><a href="http://www.a">www.a</a>.</p>
    <p><a href="http://www.a/">www.a/</a></p>
    <p><a href="http://www.a">www.a</a>:</p>
    <p><a href="http://www.a">www.a</a>;</p>
    <p><a href="http://www.a">www.a</a>&lt;</p>
    <p><a href="http://www.a=">www.a=</a></p>
    <p><a href="http://www.a%3E">www.a&gt;</a></p>
    <p><a href="http://www.a">www.a</a>?</p>
    <p><a href="http://www.a@">www.a@</a></p>
    <p><a href="http://www.a%5B">www.a[</a></p>
    <p><a href="http://www.a%5C">www.a\</a></p>
    <p><a href="http://www.a">www.a</a>]</p>
    <p><a href="http://www.a%5E">www.a^</a></p>
    <p><a href="http://www.a">www.a</a>_</p>
    <p><a href="http://www.a%60">www.a`</a></p>
    <p><a href="http://www.a%7B">www.a{</a></p>
    <p><a href="http://www.a%7C">www.a|</a></p>
    <p><a href="http://www.a%7D">www.a}</a></p>
    <p><a href="http://www.a">www.a</a>~</p>
  message: should match www (domain continue) like GitHub does (except for the bracket bug)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_58
  input: |
    # wwwtf 5?

    www.a. (space)

    www.a.!

    www.a."

    www.a.#

    www.a.$

    www.a.%

    www.a.&

    www.a.'

    www.a.(

    www.a.)

    www.a.*

    www.a.+

    www.a.,

    www.a.-

    www.a.

    www.a..

    www.a./

    www.a.:

    www.a.;

    www.a.<

    www.a.=

    www.a.>

    www.a.?

    www.a.@

    www.a.[

    www.a.\

    www.a.]

    www.a.^

    www.a._

    www.a.`

    www.a.{

    www.a.|

    www.a.}

    www.a.~
  output: |
    <h1>wwwtf 5?</h1>
    <p><a href="http://www.a">www.a</a>. (space)</p>
    <p><a href="http://www.a">www.a</a>.!</p>
    <p><a href="http://www.a">www.a</a>.&quot;</p>
    <p><a href="http://www.a.#">www.a.#</a></p>
    <p><a href="http://www.a.$">www.a.$</a></p>
    <p><a href="http://www.a.%25">www.a.%</a></p>
    <p><a href="http://www.a.&amp;">www.a.&amp;</a></p>
    <p><a href="http://www.a">www.a</a>.'</p>
    <p><a href="http://www.a.(">www.a.(</a></p>
    <p><a href="http://www.a">www.a</a>.)</p>
    <p><a href="http://www.a">www.a</a>.*</p>
    <p><a href="http://www.a.+">www.a.+</a></p>
    <p><a href="http://www.a">www.a</a>.,</p>
    <p><a href="http://www.a.-">www.a.-</a></p>
    <p><a href="http://www.a">www.a</a>.</p>
    <p><a href="http://www.a">www.a</a>..</p>
    <p><a href="http://www.a./">www.a./</a></p>
    <p><a href="http://www.a">www.a</a>.:</p>
    <p><a href="http://www.a">www.a</a>.;</p>
    <p><a href="http://www.a">www.a</a>.&lt;</p>
    <p><a href="http://www.a.=">www.a.=</a></p>
    <p><a href="http://www.a.%3E">www.a.&gt;</a></p>
    <p><a href="http://www.a">www.a</a>.?</p>
    <p><a href="http://www.a.@">www.a.@</a></p>
    <p><a href="http://www.a.%5B">www.a.[</a></p>
    <p><a href="http://www.a.%5C">www.a.\</a></p>
    <p><a href="http://www.a">www.a</a>.]</p>
    <p><a href="http://www.a.%5E">www.a.^</a></p>
    <p><a href="http://www.a">www.a</a>._</p>
    <p><a href="http://www.a.%60">www.a.`</a></p>
    <p><a href="http://www.a.%7B">www.a.{</a></p>
    <p><a href="http://www.a.%7C">www.a.|</a></p>
    <p><a href="http://www.a.%7D">www.a.}</a></p>
    <p><a href="http://www.a">www.a</a>.~</p>
  message: should match www (domain dot) like GitHub does (except for the bracket bug)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_59
  input: |
    # wwwtf?

    www. (space)

    www.!

    www."

    www.#

    www.$

    www.%

    www.&

    www.'

    www.(

    www.)

    www.*

    www.+

    www.,

    www.-

    www.

    www..

    www./

    www.:

    www.;

    www.<

    www.=

    www.>

    www.?

    www.@

    www.[

    www.\

    www.]

    www.^

    www._

    www.`

    www.{

    www.|

    www.}

    www.~
  output: |
    <h1>wwwtf?</h1>
    <p><a href="http://www">www</a>. (space)</p>
    <p><a href="http://www">www</a>.!</p>
    <p><a href="http://www">www</a>.&quot;</p>
    <p><a href="http://www.#">www.#</a></p>
    <p><a href="http://www.$">www.$</a></p>
    <p><a href="http://www.%25">www.%</a></p>
    <p><a href="http://www.&amp;">www.&amp;</a></p>
    <p><a href="http://www">www</a>.'</p>
    <p><a href="http://www.(">www.(</a></p>
    <p><a href="http://www">www</a>.)</p>
    <p><a href="http://www">www</a>.*</p>
    <p><a href="http://www.+">www.+</a></p>
    <p><a href="http://www">www</a>.,</p>
    <p><a href="http://www.-">www.-</a></p>
    <p>www.</p>
    <p><a href="http://www">www</a>..</p>
    <p><a href="http://www./">www./</a></p>
    <p><a href="http://www">www</a>.:</p>
    <p><a href="http://www">www</a>.;</p>
    <p><a href="http://www">www</a>.&lt;</p>
    <p><a href="http://www.=">www.=</a></p>
    <p><a href="http://www.%3E">www.&gt;</a></p>
    <p><a href="http://www">www</a>.?</p>
    <p><a href="http://www.@">www.@</a></p>
    <p><a href="http://www.%5B">www.[</a></p>
    <p><a href="http://www.%5C">www.\</a></p>
    <p><a href="http://www">www</a>.]</p>
    <p><a href="http://www.%5E">www.^</a></p>
    <p><a href="http://www">www</a>._</p>
    <p><a href="http://www.%60">www.`</a></p>
    <p><a href="http://www.%7B">www.{</a></p>
    <p><a href="http://www.%7C">www.|</a></p>
    <p><a href="http://www.%7D">www.}</a></p>
    <p><a href="http://www">www</a>.~</p>
  message: should match www (domain start) like GitHub does
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_60
  input: |
    # wwwtf? (4)

    www.a/b (space)

    www.a/b!

    www.a/b"

    www.a/b#

    www.a/b$

    www.a/b%

    www.a/b&

    www.a/b'

    www.a/b(

    www.a/b)

    www.a/b*

    www.a/b+

    www.a/b,

    www.a/b-

    www.a/b

    www.a/b.

    www.a/b/

    www.a/b:

    www.a/b;

    www.a/b<

    www.a/b=

    www.a/b>

    www.a/b?

    www.a/b@

    www.a/b[

    www.a/b\

    www.a/b]

    www.a/b^

    www.a/b_

    www.a/b`

    www.a/b{

    www.a/b|

    www.a/b}

    www.a/b~
  output: |
    <h1>wwwtf? (4)</h1>
    <p><a href="http://www.a/b">www.a/b</a> (space)</p>
    <p><a href="http://www.a/b">www.a/b</a>!</p>
    <p><a href="http://www.a/b">www.a/b</a>&quot;</p>
    <p><a href="http://www.a/b#">www.a/b#</a></p>
    <p><a href="http://www.a/b$">www.a/b$</a></p>
    <p><a href="http://www.a/b%25">www.a/b%</a></p>
    <p><a href="http://www.a/b&amp;">www.a/b&amp;</a></p>
    <p><a href="http://www.a/b">www.a/b</a>'</p>
    <p><a href="http://www.a/b(">www.a/b(</a></p>
    <p><a href="http://www.a/b">www.a/b</a>)</p>
    <p><a href="http://www.a/b">www.a/b</a>*</p>
    <p><a href="http://www.a/b+">www.a/b+</a></p>
    <p><a href="http://www.a/b">www.a/b</a>,</p>
    <p><a href="http://www.a/b-">www.a/b-</a></p>
    <p><a href="http://www.a/b">www.a/b</a></p>
    <p><a href="http://www.a/b">www.a/b</a>.</p>
    <p><a href="http://www.a/b/">www.a/b/</a></p>
    <p><a href="http://www.a/b">www.a/b</a>:</p>
    <p><a href="http://www.a/b">www.a/b</a>;</p>
    <p><a href="http://www.a/b">www.a/b</a>&lt;</p>
    <p><a href="http://www.a/b=">www.a/b=</a></p>
    <p><a href="http://www.a/b%3E">www.a/b&gt;</a></p>
    <p><a href="http://www.a/b">www.a/b</a>?</p>
    <p><a href="http://www.a/b@">www.a/b@</a></p>
    <p><a href="http://www.a/b%5B">www.a/b[</a></p>
    <p><a href="http://www.a/b%5C">www.a/b\</a></p>
    <p><a href="http://www.a/b">www.a/b</a>]</p>
    <p><a href="http://www.a/b%5E">www.a/b^</a></p>
    <p><a href="http://www.a/b">www.a/b</a>_</p>
    <p><a href="http://www.a/b%60">www.a/b`</a></p>
    <p><a href="http://www.a/b%7B">www.a/b{</a></p>
    <p><a href="http://www.a/b%7C">www.a/b|</a></p>
    <p><a href="http://www.a/b%7D">www.a/b}</a></p>
    <p><a href="http://www.a/b">www.a/b</a>~</p>
  message: should match www (path continue) like GitHub does (except for the bracket bug)
  options: Options::gfm()
- name: test_gfm_autolink_literal_case_61
  input: |
    # wwwtf? (3)

    www.a/ (space)

    www.a/!

    www.a/"

    www.a/#

    www.a/$

    www.a/%

    www.a/&

    www.a/'

    www.a/(

    www.a/)

    www.a/*

    www.a/+

    www.a/,

    www.a/-

    www.a/

    www.a/.

    www.a//

    www.a/:

    www.a/;

    www.a/<

    www.a/=

    www.a/>

    www.a/?

    www.a/@

    www.a/[

    www.a/\

    www.a/]

    www.a/^

    www.a/_

    www.a/`

    www.a/{

    www.a/|

    www.a/}

    www.a/~
  output: |
    <h1>wwwtf? (3)</h1>
    <p><a href="http://www.a/">www.a/</a> (space)</p>
    <p><a href="http://www.a/">www.a/</a>!</p>
    <p><a href="http://www.a/">www.a/</a>&quot;</p>
    <p><a href="http://www.a/#">www.a/#</a></p>
    <p><a href="http://www.a/$">www.a/$</a></p>
    <p><a href="http://www.a/%25">www.a/%</a></p>
    <p><a href="http://www.a/&amp;">www.a/&amp;</a></p>
    <p><a href="http://www.a/">www.a/</a>'</p>
    <p><a href="http://www.a/(">www.a/(</a></p>
    <p><a href="http://www.a/">www.a/</a>)</p>
    <p><a href="http://www.a/">www.a/</a>*</p>
    <p><a href="http://www.a/+">www.a/+</a></p>
    <p><a href="http://www.a/">www.a/</a>,</p>
    <p><a href="http://www.a/-">www.a/-</a></p>
    <p><a href="http://www.a/">www.a/</a></p>
    <p><a href="http://www.a/">www.a/</a>.</p>
    <p><a href="http://www.a//">www.a//</a></p>
    <p><a href="http://www.a/">www.a/</a>:</p>
    <p><a href="http://www.a/">www.a/</a>;</p>
    <p><a href="http://www.a/">www.a/</a>&lt;</p>
    <p><a href="http://www.a/=">www.a/=</a></p>
    <p><a href="http://www.a/%3E">www.a/&gt;</a></p>
    <p><a href="http://www.a/">www.a/</a>?</p>
    <p><a href="http://www.a/@">www.a/@</a></p>
    <p><a href="http://www.a/%5B">www.a/[</a></p>
    <p><a href="http://www.a/%5C">www.a/\</a></p>
    <p><a href="http://www.a/">www.a/</a>]</p>
    <p><a href="http://www.a/%5E">www.a/^</a></p>
    <p><a href="http://www.a/">www.a/</a>_</p>
    <p><a href="http://www.a/%60">www.a/`</a></p>
    <p><a href="http://www.a/%7B">www.a/{</a></p>
    <p><a href="http://www.a/%7C">www.a/|</a></p>
    <p><a href="http://www.a/%7D">www.a/}</a></p>
    <p><a href="http://www.a/">www.a/</a>~</p>
  message: should match www (path start) like GitHub does (except for the bracket bug)
  options: Options::gfm()
to_mdast:
- name: test_gfm_autolink_literal_case_62
  input: "a https://alpha.com b bravo@charlie.com c www.delta.com d xmpp:echo@foxtrot.com e mailto:golf@hotel.com f."
  output: |-
    markdown_mdast_node:root(#markdown_mdast_root{
      children = ?'vec!'([
        markdown_mdast_node:paragraph(#markdown_mdast_paragraph{
          children = ?'vec!'([
            markdown_mdast_node:text(#markdown_mdast_text{
              value = <<"a ">>,
              position = {some, markdown_unist_position:new(1, 1, 0, 1, 3, 2)}
            }),
            markdown_mdast_node:link(#markdown_mdast_link{
              url = <<"https://alpha.com">>,
              title = none,
              children = ?'vec!'([
                markdown_mdast_node:text(#markdown_mdast_text{
                  value = <<"https://alpha.com">>,
                  position = {some, markdown_unist_position:new(1, 3, 2, 1, 20, 19)}
                })
              ]),
              position = {some, markdown_unist_position:new(1, 3, 2, 1, 20, 19)}
            }),
            markdown_mdast_node:text(#markdown_mdast_text{
              value = <<" b ">>,
              position = {some, markdown_unist_position:new(1, 20, 19, 1, 23, 22)}
            }),
            markdown_mdast_node:link(#markdown_mdast_link{
              url = <<"mailto:bravo@charlie.com">>,
              title = none,
              children = ?'vec!'([
                markdown_mdast_node:text(#markdown_mdast_text{
                  value = <<"bravo@charlie.com">>,
                  position = {some, markdown_unist_position:new(1, 23, 22, 1, 40, 39)}
                })
              ]),
              position = {some, markdown_unist_position:new(1, 23, 22, 1, 40, 39)}
            }),
            markdown_mdast_node:text(#markdown_mdast_text{
              value = <<" c ">>,
              position = {some, markdown_unist_position:new(1, 40, 39, 1, 43, 42)}
            }),
            markdown_mdast_node:link(#markdown_mdast_link{
              url = <<"http://www.delta.com">>,
              title = none,
              children = ?'vec!'([
                markdown_mdast_node:text(#markdown_mdast_text{
                  value = <<"www.delta.com">>,
                  position = {some, markdown_unist_position:new(1, 43, 42, 1, 56, 55)}
                })
              ]),
              position = {some, markdown_unist_position:new(1, 43, 42, 1, 56, 55)}
            }),
            markdown_mdast_node:text(#markdown_mdast_text{
              value = <<" d ">>,
              position = {some, markdown_unist_position:new(1, 56, 55, 1, 59, 58)}
            }),
            markdown_mdast_node:link(#markdown_mdast_link{
              url = <<"xmpp:echo@foxtrot.com">>,
              title = none,
              children = ?'vec!'([
                markdown_mdast_node:text(#markdown_mdast_text{
                  value = <<"xmpp:echo@foxtrot.com">>,
                  position = {some, markdown_unist_position:new(1, 59, 58, 1, 80, 79)}
                })
              ]),
              position = {some, markdown_unist_position:new(1, 59, 58, 1, 80, 79)}
            }),
            markdown_mdast_node:text(#markdown_mdast_text{
              value = <<" e ">>,
              position = {some, markdown_unist_position:new(1, 80, 79, 1, 83, 82)}
            }),
            markdown_mdast_node:link(#markdown_mdast_link{
              url = <<"mailto:golf@hotel.com">>,
              title = none,
              children = ?'vec!'([
                markdown_mdast_node:text(#markdown_mdast_text{
                  value = <<"mailto:golf@hotel.com">>,
                  position = {some, markdown_unist_position:new(1, 83, 82, 1, 104, 103)}
                })
              ]),
              position = {some, markdown_unist_position:new(1, 83, 82, 1, 104, 103)}
            }),
            markdown_mdast_node:text(#markdown_mdast_text{
              value = <<" f.">>,
              position = {some, markdown_unist_position:new(1, 104, 103, 1, 107, 106)}
            })
          ]),
          position = {some, markdown_unist_position:new(1, 1, 0, 1, 107, 106)}
        })
      ]),
      position = {some, markdown_unist_position:new(1, 1, 0, 1, 107, 106)}
    })
  message: "should support GFM autolink literals as `Link`s in mdast"
  parse_options: ParseOptions::gfm()
