# yaml-language-server: $schema=./schema.json

# Copyright (c) Meta Platforms, Inc. and affiliates.
# Copyright (c) WhatsApp LLC
#
# This source code is licensed under the MIT license found in the
# LICENSE.md file in the root directory of this source tree.

---
suite:
  name: gfm_table
  created: 2025-10-07
  modified: 2025-10-07
to_html:
- name: test_gfm_table_case_1
  input: |-
    | a |
    | - |
    | b |
  output: |-
    <p>| a |
    | - |
    | b |</p>
  message: should ignore tables by default
to_html_with_options:
- name: test_gfm_table_case_2
  input: |-
    | a |
    | - |
    | b |
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>b</td>
    </tr>
    </tbody>
    </table>
  message: should support tables
  options: Options::gfm()
- name: test_gfm_table_case_3
  input: '| a |'
  output: <p>| a |</p>
  message: should not support a table w/ the head row ending in an eof (1)
  options: Options::gfm()
- name: test_gfm_table_case_4
  input: '| a'
  output: <p>| a</p>
  message: should not support a table w/ the head row ending in an eof (2)
  options: Options::gfm()
- name: test_gfm_table_case_5
  input: a |
  output: <p>a |</p>
  message: should not support a table w/ the head row ending in an eof (3)
  options: Options::gfm()
- name: test_gfm_table_case_6
  input: |-
    | a |
    | - |
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
  message: should support a table w/ a delimiter row ending in an eof (1)
  options: Options::gfm()
- name: test_gfm_table_case_7
  input: |-
    | a
    | -
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
  message: should support a table w/ a delimiter row ending in an eof (2)
  options: Options::gfm()
- name: test_gfm_table_case_8
  input: |-
    | a |
    | - |
    | b |
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>b</td>
    </tr>
    </tbody>
    </table>
  message: should support a table w/ a body row ending in an eof (1)
  options: Options::gfm()
- name: test_gfm_table_case_9
  input: |-
    | a
    | -
    | b
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>b</td>
    </tr>
    </tbody>
    </table>
  message: should support a table w/ a body row ending in an eof (2)
  options: Options::gfm()
- name: test_gfm_table_case_10
  input: |-
    a|b
    -|-
    c|d
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    <th>b</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>c</td>
    <td>d</td>
    </tr>
    </tbody>
    </table>
  message: should support a table w/ a body row ending in an eof (3)
  options: Options::gfm()
- name: test_gfm_table_case_11
  input: "| a  \n| -\t\n| b |     "
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>b</td>
    </tr>
    </tbody>
    </table>
  message: should support rows w/ trailing whitespace (1)
  options: Options::gfm()
- name: test_gfm_table_case_12
  input: "| a | \n| - |"
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
  message: should support rows w/ trailing whitespace (2)
  options: Options::gfm()
- name: test_gfm_table_case_13
  input: "| a |\n| - | "
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
  message: should support rows w/ trailing whitespace (3)
  options: Options::gfm()
- name: test_gfm_table_case_14
  input: "| a |\n| - |\n| b | "
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>b</td>
    </tr>
    </tbody>
    </table>
  message: should support rows w/ trailing whitespace (4)
  options: Options::gfm()
- name: test_gfm_table_case_15
  input: |-
    ||a|
    |-|-|
  output: |-
    <table>
    <thead>
    <tr>
    <th></th>
    <th>a</th>
    </tr>
    </thead>
    </table>
  message: should support empty first header cells
  options: Options::gfm()
- name: test_gfm_table_case_16
  input: |-
    |a||
    |-|-|
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    <th></th>
    </tr>
    </thead>
    </table>
  message: should support empty last header cells
  options: Options::gfm()
- name: test_gfm_table_case_17
  input: |-
    a||b
    -|-|-
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    <th></th>
    <th>b</th>
    </tr>
    </thead>
    </table>
  message: should support empty header cells
  options: Options::gfm()
- name: test_gfm_table_case_18
  input: |-
    |a|b|
    |-|-|
    ||c|
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    <th>b</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td></td>
    <td>c</td>
    </tr>
    </tbody>
    </table>
  message: should support empty first body cells
  options: Options::gfm()
- name: test_gfm_table_case_19
  input: |-
    |a|b|
    |-|-|
    |c||
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    <th>b</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>c</td>
    <td></td>
    </tr>
    </tbody>
    </table>
  message: should support empty last body cells
  options: Options::gfm()
- name: test_gfm_table_case_20
  input: |-
    a|b|c
    -|-|-
    d||e
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    <th>b</th>
    <th>c</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>d</td>
    <td></td>
    <td>e</td>
    </tr>
    </tbody>
    </table>
  message: should support empty body cells
  options: Options::gfm()
- name: test_gfm_table_case_21
  input: |
    :
    |-|
    |a|

    b
    |-|
    |c|

    |
    |-|
    |d|

    |
    |-|
    |e|

    |:
    |-|
    |f|

    ||
    |-|
    |g|

    | |
    |-|
    |h|
  output: |
    <table>
    <thead>
    <tr>
    <th>:</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>a</td>
    </tr>
    </tbody>
    </table>
    <table>
    <thead>
    <tr>
    <th>b</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>c</td>
    </tr>
    </tbody>
    </table>
    <p>|
    |-|
    |d|</p>
    <p>|
    |-|
    |e|</p>
    <table>
    <thead>
    <tr>
    <th>:</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>f</td>
    </tr>
    </tbody>
    </table>
    <table>
    <thead>
    <tr>
    <th></th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>g</td>
    </tr>
    </tbody>
    </table>
    <table>
    <thead>
    <tr>
    <th></th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>h</td>
    </tr>
    </tbody>
    </table>
  message: should need any character other than a single pipe in the header row
  options: Options::gfm()
- name: test_gfm_table_case_22
  input: |
    a
    |-

    b
    ||

    c
    |-|

    d
    |:|

    e
    | |

    f
    | -|

    g
    |- |
  output: |
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <p>b
    ||</p>
    <table>
    <thead>
    <tr>
    <th>c</th>
    </tr>
    </thead>
    </table>
    <p>d
    |:|</p>
    <p>e
    | |</p>
    <table>
    <thead>
    <tr>
    <th>f</th>
    </tr>
    </thead>
    </table>
    <table>
    <thead>
    <tr>
    <th>g</th>
    </tr>
    </thead>
    </table>
  message: should need a dash in the delimimter row
  options: Options::gfm()
- name: test_gfm_table_case_23
  input: |-
    |
    |
  output: |-
    <p>|
    |</p>
  message: should need something
  options: Options::gfm()
- name: test_gfm_table_case_24
  input: |-
    | a |
    | - |
    - b
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <ul>
    <li>b</li>
    </ul>
  message: should support a list after a table
  options: Options::gfm()
- name: test_gfm_table_case_25
  input: |-
    > | a |
    | - |
  output: |-
    <blockquote>
    <p>| a |
    | - |</p>
    </blockquote>
  message: should not support a lazy delimiter row (1)
  options: Options::gfm()
- name: test_gfm_table_case_26
  input: |-
    > a
    > | b |
    | - |
  output: |-
    <blockquote>
    <p>a
    | b |
    | - |</p>
    </blockquote>
  message: should not support a lazy delimiter row (2)
  options: Options::gfm()
- name: test_gfm_table_case_27
  input: |-
    | a |
    > | - |
  output: |-
    <p>| a |</p>
    <blockquote>
    <p>| - |</p>
    </blockquote>
  message: should not support a piercing delimiter row
  options: Options::gfm()
- name: test_gfm_table_case_28
  input: |-
    > a
    > | b |
    |-
  output: |-
    <blockquote>
    <p>a
    | b |
    |-</p>
    </blockquote>
  message: should not support a lazy body row (2)
  options: Options::gfm()
- name: test_gfm_table_case_29
  input: |-
    > | a |
    > | - |
    | b |
  output: |-
    <blockquote>
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    </blockquote>
    <p>| b |</p>
  message: should not support a lazy body row (1)
  options: Options::gfm()
- name: test_gfm_table_case_30
  input: |-
    > a
    > | b |
    > | - |
    | c |
  output: |-
    <blockquote>
    <p>a</p>
    <table>
    <thead>
    <tr>
    <th>b</th>
    </tr>
    </thead>
    </table>
    </blockquote>
    <p>| c |</p>
  message: should not support a lazy body row (2)
  options: Options::gfm()
- name: test_gfm_table_case_31
  input: |-
    > | A |
    > | - |
    > | 1 |
    | 2 |
  output: |-
    <blockquote>
    <table>
    <thead>
    <tr>
    <th>A</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>1</td>
    </tr>
    </tbody>
    </table>
    </blockquote>
    <p>| 2 |</p>
  message: should not support a lazy body row (3)
  options: Options::gfm()
- name: test_gfm_table_case_32
  input: |-
    | a |
       | - |
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
  message: should form a table if the delimiter row is indented w/ 3 spaces
  options: Options::gfm()
- name: test_gfm_table_case_33
  input: |-
    | a |
        | - |
  output: |-
    <p>| a |
    | - |</p>
  message: should not form a table if the delimiter row is indented w/ 4 spaces
  options: Options::gfm()
- name: test_gfm_table_case_34
  input: |-
    | a |
        | - |
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
  message: "should form a table if the delimiter row is indented w/ 4 spaces and indented code is turned off"
  options:
    extend: gfm
    parse:
      constructs:
        code_indented: false
- name: test_gfm_table_case_35
  input: |-
    | a |
    | - |
    > block quote?
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <blockquote>
    <p>block quote?</p>
    </blockquote>
  message: should be interrupted by a block quote
  options: Options::gfm()
- name: test_gfm_table_case_36
  input: |-
    | a |
    | - |
    >
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <blockquote>
    </blockquote>
  message: should be interrupted by a block quote (empty)
  options: Options::gfm()
- name: test_gfm_table_case_37
  input: |-
    | a |
    | - |
    - list?
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <ul>
    <li>list?</li>
    </ul>
  message: should be interrupted by a list
  options: Options::gfm()
- name: test_gfm_table_case_38
  input: |-
    | a |
    | - |
    -
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <ul>
    <li></li>
    </ul>
  message: should be interrupted by a list (empty)
  options: Options::gfm()
- name: test_gfm_table_case_39
  input: |-
    | a |
    | - |
    <!-- HTML? -->
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <!-- HTML? -->
  message: should be interrupted by HTML (flow)
  options:
    extend: gfm
    compile:
      allow_dangerous_html: true
      allow_dangerous_protocol: true
- name: test_gfm_table_case_40
  input: "| a |\n| - |\n\tcode?"
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <pre><code>code?
    </code></pre>
  message: should be interrupted by code (indented)
  options:
    extend: gfm
    compile:
      allow_dangerous_html: true
      allow_dangerous_protocol: true
- name: test_gfm_table_case_41
  input: |-
    | a |
    | - |
    ```js
    code?
  output: |
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <pre><code class="language-js">code?
    </code></pre>
  message: should be interrupted by code (fenced)
  options:
    extend: gfm
    compile:
      allow_dangerous_html: true
      allow_dangerous_protocol: true
- name: test_gfm_table_case_42
  input: |-
    | a |
    | - |
    ***
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <hr />
  message: should be interrupted by a thematic break
  options:
    extend: gfm
    compile:
      allow_dangerous_html: true
      allow_dangerous_protocol: true
- name: test_gfm_table_case_43
  input: |-
    | a |
    | - |
    # heading?
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <h1>heading?</h1>
  message: should be interrupted by a heading (ATX)
  options: Options::gfm()
- name: test_gfm_table_case_44
  input: |-
    | a |
    | - |
    heading
    =
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>heading</td>
    </tr>
    <tr>
    <td>=</td>
    </tr>
    </tbody>
    </table>
  message: should *not* be interrupted by a heading (setext)
  options: Options::gfm()
- name: test_gfm_table_case_45
  input: |-
    | a |
    | - |
    heading
    ---
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>heading</td>
    </tr>
    </tbody>
    </table>
    <hr />
  message: "should *not* be interrupted by a heading (setext), but interrupt if the underline is also a thematic break"
  options: Options::gfm()
- name: test_gfm_table_case_46
  input: |-
    | a |
    | - |
    heading
    -
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>heading</td>
    </tr>
    </tbody>
    </table>
    <ul>
    <li></li>
    </ul>
  message: "should *not* be interrupted by a heading (setext), but interrupt if the underline is also an empty list item bullet"
  options: Options::gfm()
- name: test_gfm_table_case_47
  input: |-
    a
    b
    -:
  output: |-
    <p>a</p>
    <table>
    <thead>
    <tr>
    <th align="right">b</th>
    </tr>
    </thead>
    </table>
  message: should support a single head row
  options: Options::gfm()
- name: test_gfm_table_case_48
  input: |-
    > | a |
    > | - |
  output: |-
    <blockquote>
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    </blockquote>
  message: should support a table in a container
  options: Options::gfm()
- name: test_gfm_table_case_49
  input: |-
    > | a |
    | - |
  output: |-
    <blockquote>
    <p>| a |
    | - |</p>
    </blockquote>
  message: should not support a lazy delimiter row if the head row is in a container
  options: Options::gfm()
- name: test_gfm_table_case_50
  input: |-
    | a |
    > | - |
  output: |-
    <p>| a |</p>
    <blockquote>
    <p>| - |</p>
    </blockquote>
  message: "should not support a “piercing” container for the delimiter row, if the head row was not in that container"
  options: Options::gfm()
- name: test_gfm_table_case_51
  input: |-
    > | a |
    > | - |
    | c |
  output: |-
    <blockquote>
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    </blockquote>
    <p>| c |</p>
  message: "should not support a lazy body row if the head row and delimiter row are in a container"
  options: Options::gfm()
- name: test_gfm_table_case_52
  input: |-
    > | a |
    | - |
    > | c |
  output: |-
    <blockquote>
    <p>| a |
    | - |
    | c |</p>
    </blockquote>
  message: "should not support a lazy delimiter row if the head row and a further body row are in a container"
  options: Options::gfm()
- name: test_gfm_table_case_53
  input: |-
    [
    a
    :-
    ]: b
  output: |-
    <p>[</p>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">]: b</td>
    </tr>
    </tbody>
    </table>
  message: should prefer GFM tables over definitions
  options: Options::gfm()
- name: test_gfm_table_case_54
  input: "    | a |\n\t| - |\n    | b |"
  output: |-
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>b</td>
    </tr>
    </tbody>
    </table>
  message: should support indented rows if code (indented) is off
  options:
    extend: gfm
    parse:
      constructs:
        code_indented: false
- name: test_gfm_table_case_55
  input: |
    # Align

    ## An empty initial cell

    | | a|c|
    |--|:----:|:---|
    |a|b|c|
    |a|b|c|

    ## Missing alignment characters

    | a | b | c |
    |   |---|---|
    | d | e | f |

    * * *

    | a | b | c |
    |---|---|   |
    | d | e | f |

    ## Incorrect characters

    | a | b | c |
    |---|-*-|---|
    | d | e | f |

    ## Two alignments

    |a|
    |::|

    |a|
    |:-:|

    ## Two at the start or end

    |a|
    |::-|

    |a|
    |-::|

    ## In the middle

    |a|
    |-:-|

    ## A space in the middle

    |a|
    |- -|

    ## No pipe

    a
    :-:

    a
    :-

    a
    -:

    ## A single colon

    |a|
    |:|

    a
    :

    ## Alignment on empty cells

    | a | b | c | d | e |
    | - | - | :- | -: | :-: |
    | f |
  output: |
    <h1>Align</h1>
    <h2>An empty initial cell</h2>
    <table>
    <thead>
    <tr>
    <th></th>
    <th align="center">a</th>
    <th align="left">c</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>a</td>
    <td align="center">b</td>
    <td align="left">c</td>
    </tr>
    <tr>
    <td>a</td>
    <td align="center">b</td>
    <td align="left">c</td>
    </tr>
    </tbody>
    </table>
    <h2>Missing alignment characters</h2>
    <p>| a | b | c |
    |   |---|---|
    | d | e | f |</p>
    <hr />
    <p>| a | b | c |
    |---|---|   |
    | d | e | f |</p>
    <h2>Incorrect characters</h2>
    <p>| a | b | c |
    |---|-*-|---|
    | d | e | f |</p>
    <h2>Two alignments</h2>
    <p>|a|
    |::|</p>
    <table>
    <thead>
    <tr>
    <th align="center">a</th>
    </tr>
    </thead>
    </table>
    <h2>Two at the start or end</h2>
    <p>|a|
    |::-|</p>
    <p>|a|
    |-::|</p>
    <h2>In the middle</h2>
    <p>|a|
    |-:-|</p>
    <h2>A space in the middle</h2>
    <p>|a|
    |- -|</p>
    <h2>No pipe</h2>
    <table>
    <thead>
    <tr>
    <th align="center">a</th>
    </tr>
    </thead>
    </table>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    </table>
    <table>
    <thead>
    <tr>
    <th align="right">a</th>
    </tr>
    </thead>
    </table>
    <h2>A single colon</h2>
    <p>|a|
    |:|</p>
    <p>a
    :</p>
    <h2>Alignment on empty cells</h2>
    <table>
    <thead>
    <tr>
    <th>a</th>
    <th>b</th>
    <th align="left">c</th>
    <th align="right">d</th>
    <th align="center">e</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>f</td>
    <td></td>
    <td align="left"></td>
    <td align="right"></td>
    <td align="center"></td>
    </tr>
    </tbody>
    </table>
  message: should match alignment like GitHub
  options: Options::gfm()
- name: test_gfm_table_case_56
  input: |
    # Tables

    | a | b | c |
    | - | - | - |
    | d | e | f |

    ## No body

    | a | b | c |
    | - | - | - |

    ## One column

    | a |
    | - |
    | b |
  output: |
    <h1>Tables</h1>
    <table>
    <thead>
    <tr>
    <th>a</th>
    <th>b</th>
    <th>c</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>d</td>
    <td>e</td>
    <td>f</td>
    </tr>
    </tbody>
    </table>
    <h2>No body</h2>
    <table>
    <thead>
    <tr>
    <th>a</th>
    <th>b</th>
    <th>c</th>
    </tr>
    </thead>
    </table>
    <h2>One column</h2>
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>b</td>
    </tr>
    </tbody>
    </table>
  message: should match basic like GitHub
  options: Options::gfm()
- name: test_gfm_table_case_57
  input: |
    # Tables in things

    ## In lists

    *   Unordered:

        | A | B |
        | - | - |
        | 1 | 2 |

    1.  Ordered:

        | A | B |
        | - | - |
        | 1 | 2 |

    *   Lazy?
        | A | B |
        | - | - |
       | 1 | 2 |
      | 3 | 4 |
     | 5 | 6 |
    | 7 | 8 |

    ## In block quotes

    > W/ space:
    > | A | B |
    > | - | - |
    > | 1 | 2 |

    >W/o space:
    >| A | B |
    >| - | - |
    >| 1 | 2 |

    > Lazy?
    > | A | B |
    > | - | - |
    > | 1 | 2 |
    >| 3 | 4 |
    | 5 | 6 |

    ### List interrupting delimiters

    a |
    - |

    a
    -|

    a
    |-
  output: |
    <h1>Tables in things</h1>
    <h2>In lists</h2>
    <ul>
    <li>
    <p>Unordered:</p>
    <table>
    <thead>
    <tr>
    <th>A</th>
    <th>B</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>1</td>
    <td>2</td>
    </tr>
    </tbody>
    </table>
    </li>
    </ul>
    <ol>
    <li>
    <p>Ordered:</p>
    <table>
    <thead>
    <tr>
    <th>A</th>
    <th>B</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>1</td>
    <td>2</td>
    </tr>
    </tbody>
    </table>
    </li>
    </ol>
    <ul>
    <li>Lazy?
    <table>
    <thead>
    <tr>
    <th>A</th>
    <th>B</th>
    </tr>
    </thead>
    </table>
    </li>
    </ul>
    <p>| 1 | 2 |
    | 3 | 4 |
    | 5 | 6 |
    | 7 | 8 |</p>
    <h2>In block quotes</h2>
    <blockquote>
    <p>W/ space:</p>
    <table>
    <thead>
    <tr>
    <th>A</th>
    <th>B</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>1</td>
    <td>2</td>
    </tr>
    </tbody>
    </table>
    </blockquote>
    <blockquote>
    <p>W/o space:</p>
    <table>
    <thead>
    <tr>
    <th>A</th>
    <th>B</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>1</td>
    <td>2</td>
    </tr>
    </tbody>
    </table>
    </blockquote>
    <blockquote>
    <p>Lazy?</p>
    <table>
    <thead>
    <tr>
    <th>A</th>
    <th>B</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>1</td>
    <td>2</td>
    </tr>
    <tr>
    <td>3</td>
    <td>4</td>
    </tr>
    </tbody>
    </table>
    </blockquote>
    <p>| 5 | 6 |</p>
    <h3>List interrupting delimiters</h3>
    <p>a |</p>
    <ul>
    <li>|</li>
    </ul>
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
  message: should match containers like GitHub
  options: Options::gfm()
- name: test_gfm_table_case_58
  input: |
    | a |
    | - |
    | - |
    | 1 |
  output: |
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>-</td>
    </tr>
    <tr>
    <td>1</td>
    </tr>
    </tbody>
    </table>
  message: should match a double delimiter row like GitHub
  options: Options::gfm()
- name: test_gfm_table_case_59
  input: |
    # Examples from GFM

    ## A

    | foo | bar |
    | --- | --- |
    | baz | bim |

    ## B

    | abc | defghi |
    :-: | -----------:
    bar | baz

    ## C

    | f\|oo  |
    | ------ |
    | b `\|` az |
    | b **\|** im |

    ## D

    | abc | def |
    | --- | --- |
    | bar | baz |
    > bar

    ## E

    | abc | def |
    | --- | --- |
    | bar | baz |
    bar

    bar

    ## F

    | abc | def |
    | --- |
    | bar |

    ## G

    | abc | def |
    | --- | --- |
    | bar |
    | bar | baz | boo |

    ## H

    | abc | def |
    | --- | --- |
  output: |
    <h1>Examples from GFM</h1>
    <h2>A</h2>
    <table>
    <thead>
    <tr>
    <th>foo</th>
    <th>bar</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>baz</td>
    <td>bim</td>
    </tr>
    </tbody>
    </table>
    <h2>B</h2>
    <table>
    <thead>
    <tr>
    <th align="center">abc</th>
    <th align="right">defghi</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="center">bar</td>
    <td align="right">baz</td>
    </tr>
    </tbody>
    </table>
    <h2>C</h2>
    <table>
    <thead>
    <tr>
    <th>f|oo</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>b <code>|</code> az</td>
    </tr>
    <tr>
    <td>b <strong>|</strong> im</td>
    </tr>
    </tbody>
    </table>
    <h2>D</h2>
    <table>
    <thead>
    <tr>
    <th>abc</th>
    <th>def</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>bar</td>
    <td>baz</td>
    </tr>
    </tbody>
    </table>
    <blockquote>
    <p>bar</p>
    </blockquote>
    <h2>E</h2>
    <table>
    <thead>
    <tr>
    <th>abc</th>
    <th>def</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>bar</td>
    <td>baz</td>
    </tr>
    <tr>
    <td>bar</td>
    <td></td>
    </tr>
    </tbody>
    </table>
    <p>bar</p>
    <h2>F</h2>
    <p>| abc | def |
    | --- |
    | bar |</p>
    <h2>G</h2>
    <table>
    <thead>
    <tr>
    <th>abc</th>
    <th>def</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>bar</td>
    <td></td>
    </tr>
    <tr>
    <td>bar</td>
    <td>baz</td>
    </tr>
    </tbody>
    </table>
    <h2>H</h2>
    <table>
    <thead>
    <tr>
    <th>abc</th>
    <th>def</th>
    </tr>
    </thead>
    </table>
  message: should match examples from the GFM spec like GitHub
  options: Options::gfm()
- name: test_gfm_table_case_60
  input: |
    # Grave accents

    ## Grave accent in cell

    | A            | B |
    |--------------|---|
    | <kbd>`</kbd> | C |

    ## Escaped grave accent in “inline code” in cell

    | A   |
    |-----|
    | `\` |

    ## “Empty” inline code

    | 1 | 2    | 3  |
    |---|------|----|
    | a |   `` |    |
    | b |   `` | `` |
    | c |    ` | `  |
    | d |     `|`   |
    | e | `\|` |    |
    | f |   \| |    |

    ## Escaped pipes in code in cells

    | `\|\\` |
    | --- |
    | `\|\\` |

    `\|\\`
  output: |
    <h1>Grave accents</h1>
    <h2>Grave accent in cell</h2>
    <table>
    <thead>
    <tr>
    <th>A</th>
    <th>B</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td><kbd>`</kbd></td>
    <td>C</td>
    </tr>
    </tbody>
    </table>
    <h2>Escaped grave accent in “inline code” in cell</h2>
    <table>
    <thead>
    <tr>
    <th>A</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td><code>\</code></td>
    </tr>
    </tbody>
    </table>
    <h2>“Empty” inline code</h2>
    <table>
    <thead>
    <tr>
    <th>1</th>
    <th>2</th>
    <th>3</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>a</td>
    <td>``</td>
    <td></td>
    </tr>
    <tr>
    <td>b</td>
    <td>``</td>
    <td>``</td>
    </tr>
    <tr>
    <td>c</td>
    <td>`</td>
    <td>`</td>
    </tr>
    <tr>
    <td>d</td>
    <td>`</td>
    <td>`</td>
    </tr>
    <tr>
    <td>e</td>
    <td><code>|</code></td>
    <td></td>
    </tr>
    <tr>
    <td>f</td>
    <td>|</td>
    <td></td>
    </tr>
    </tbody>
    </table>
    <h2>Escaped pipes in code in cells</h2>
    <table>
    <thead>
    <tr>
    <th><code>|\\</code></th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td><code>|\\</code></td>
    </tr>
    </tbody>
    </table>
    <p><code>\|\\</code></p>
  message: should match grave accent like GitHub
  options:
    extend: gfm
    compile:
      allow_dangerous_html: true
      allow_dangerous_protocol: true
- name: test_gfm_table_case_61
  input: |
    # Code

    ## Indented delimiter row

    a
       |-

    a
        |-

    ## Indented body

    | a |
     | - |
      | C |
       | D |
        | E |
  output: |
    <h1>Code</h1>
    <h2>Indented delimiter row</h2>
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
    <p>a
    |-</p>
    <h2>Indented body</h2>
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>C</td>
    </tr>
    <tr>
    <td>D</td>
    </tr>
    </tbody>
    </table>
    <pre><code>| E |
    </code></pre>
  message: should match indent like GitHub
  options: Options::gfm()
- name: test_gfm_table_case_62
  input: |
    ## Blank line

    a
    :-
    b

    c

    ## Block quote

    a
    :-
    b
    > c

    ## Code (fenced)

    a
    :-
    b
    ```
    c
    ```

    ## Code (indented)

    a
    :-
    b
        c

    ## Definition

    a
    :-
    b
    [c]: d

    ## Heading (atx)

    a
    :-
    b
    # c


    ## Heading (setext) (rank 1)

    a
    :-
    b
    ==
    c

    ## Heading (setext) (rank 2)

    a
    :-
    b
    --
    c

    ## HTML (flow, kind 1: raw)

    a
    :-
    b
    <pre>
      a
    </pre>

    ## HTML (flow, kind 2: comment)

    a
    :-
    b
    <!-- c -->

    ## HTML (flow, kind 3: instruction)

    a
    :-
    b
    <? c ?>

    ## HTML (flow, kind 4: declaration)

    a
    :-
    b
    <!C>

    ## HTML (flow, kind 5: cdata)

    a
    :-
    b
    <![CDATA[c]]>

    ## HTML (flow, kind 6: basic)

    a
    :-
    b
    <div>

    ## HTML (flow, kind 7: complete)

    a
    :-
    b
    <x>

    ## List (ordered, 1)

    a
    :-
    b
    1. c

    ## List (ordered, other)

    a
    :-
    b
    2. c

    ## List (unordered)

    a
    :-
    b
    * c

    ## List (unordered, blank)

    a
    :-
    b
    *
    c

    ## List (unordered, blank start)

    a
    :-
    b
    *
      c

    ## Thematic break

    a
    :-
    b
    ***
  output: |
    <h2>Blank line</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <p>c</p>
    <h2>Block quote</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <blockquote>
    <p>c</p>
    </blockquote>
    <h2>Code (fenced)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <pre><code>c
    </code></pre>
    <h2>Code (indented)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <pre><code>c
    </code></pre>
    <h2>Definition</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    <tr>
    <td align="left">[c]: d</td>
    </tr>
    </tbody>
    </table>
    <h2>Heading (atx)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <h1>c</h1>
    <h2>Heading (setext) (rank 1)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    <tr>
    <td align="left">==</td>
    </tr>
    <tr>
    <td align="left">c</td>
    </tr>
    </tbody>
    </table>
    <h2>Heading (setext) (rank 2)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    <tr>
    <td align="left">--</td>
    </tr>
    <tr>
    <td align="left">c</td>
    </tr>
    </tbody>
    </table>
    <h2>HTML (flow, kind 1: raw)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <pre>
      a
    </pre>
    <h2>HTML (flow, kind 2: comment)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <!-- c -->
    <h2>HTML (flow, kind 3: instruction)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <? c ?>
    <h2>HTML (flow, kind 4: declaration)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <!C>
    <h2>HTML (flow, kind 5: cdata)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <![CDATA[c]]>
    <h2>HTML (flow, kind 6: basic)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <div>
    <h2>HTML (flow, kind 7: complete)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <x>
    <h2>List (ordered, 1)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <ol>
    <li>c</li>
    </ol>
    <h2>List (ordered, other)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <ol start="2">
    <li>c</li>
    </ol>
    <h2>List (unordered)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <ul>
    <li>c</li>
    </ul>
    <h2>List (unordered, blank)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <ul>
    <li></li>
    </ul>
    <p>c</p>
    <h2>List (unordered, blank start)</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <ul>
    <li>c</li>
    </ul>
    <h2>Thematic break</h2>
    <table>
    <thead>
    <tr>
    <th align="left">a</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td align="left">b</td>
    </tr>
    </tbody>
    </table>
    <hr />
  message: should match interrupt like GitHub
  options:
    extend: gfm
    compile:
      allow_dangerous_html: true
      allow_dangerous_protocol: true
- name: test_gfm_table_case_63
  input: |
    # Loose

    ## Loose

    Header 1 | Header 2
    -------- | --------
    Cell 1   | Cell 2
    Cell 3   | Cell 4

    ## One “column”, loose

    a
    -
    b

    ## No pipe in first row

    a
    | - |
  output: |
    <h1>Loose</h1>
    <h2>Loose</h2>
    <table>
    <thead>
    <tr>
    <th>Header 1</th>
    <th>Header 2</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>Cell 1</td>
    <td>Cell 2</td>
    </tr>
    <tr>
    <td>Cell 3</td>
    <td>Cell 4</td>
    </tr>
    </tbody>
    </table>
    <h2>One “column”, loose</h2>
    <h2>a</h2>
    <p>b</p>
    <h2>No pipe in first row</h2>
    <table>
    <thead>
    <tr>
    <th>a</th>
    </tr>
    </thead>
    </table>
  message: should match loose tables like GitHub
  options: Options::gfm()
- name: test_gfm_table_case_64
  input: |
    # Some more escapes

    | Head          |
    | ------------- |
    | A | Alpha     |
    | B \| Bravo    |
    | C \\| Charlie |
    | D \\\| Delta  |
    | E \\\\| Echo  |

    Note: GH has a bug where in case C and E, the escaped escape is treated as a
    normal escape: <https://github.com/github/cmark-gfm/issues/277>.
  output: |
    <h1>Some more escapes</h1>
    <table>
    <thead>
    <tr>
    <th>Head</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>A</td>
    </tr>
    <tr>
    <td>B | Bravo</td>
    </tr>
    <tr>
    <td>C \</td>
    </tr>
    <tr>
    <td>D \| Delta</td>
    </tr>
    <tr>
    <td>E \\</td>
    </tr>
    </tbody>
    </table>
    <p>Note: GH has a bug where in case C and E, the escaped escape is treated as a
    normal escape: <a href="https://github.com/github/cmark-gfm/issues/277">https://github.com/github/cmark-gfm/issues/277</a>.</p>
  message: should match loose escapes like GitHub
  options: Options::gfm()
to_mdast:
- name: test_gfm_table_case_65
  input: |-
    | none | left | right | center |
    | - | :- | -: | :-: |
    | a |
    | b | c | d | e | f |
  output: |-
    markdown_mdast_node:root(#markdown_mdast_root{
      children = ?'vec!'([
        markdown_mdast_node:table(#markdown_mdast_table{
          align = ?'vec!'([
            markdown_align_kind:none(),
            markdown_align_kind:left(),
            markdown_align_kind:right(),
            markdown_align_kind:center()
          ]),
          children = ?'vec!'([
            markdown_mdast_node:table_row(#markdown_mdast_table_row{
              children = ?'vec!'([
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"none">>,
                      position = {some, markdown_unist_position:new(1, 3, 2, 1, 7, 6)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(1, 1, 0, 1, 8, 7)}
                }),
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"left">>,
                      position = {some, markdown_unist_position:new(1, 10, 9, 1, 14, 13)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(1, 8, 7, 1, 15, 14)}
                }),
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"right">>,
                      position = {some, markdown_unist_position:new(1, 17, 16, 1, 22, 21)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(1, 15, 14, 1, 23, 22)}
                }),
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"center">>,
                      position = {some, markdown_unist_position:new(1, 25, 24, 1, 31, 30)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(1, 23, 22, 1, 33, 32)}
                })
              ]),
              position = {some, markdown_unist_position:new(1, 1, 0, 1, 33, 32)}
            }),
            markdown_mdast_node:table_row(#markdown_mdast_table_row{
              children = ?'vec!'([
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"a">>,
                      position = {some, markdown_unist_position:new(3, 3, 57, 3, 4, 58)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(3, 1, 55, 3, 6, 60)}
                })
              ]),
              position = {some, markdown_unist_position:new(3, 1, 55, 3, 6, 60)}
            }),
            markdown_mdast_node:table_row(#markdown_mdast_table_row{
              children = ?'vec!'([
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"b">>,
                      position = {some, markdown_unist_position:new(4, 3, 63, 4, 4, 64)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(4, 1, 61, 4, 5, 65)}
                }),
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"c">>,
                      position = {some, markdown_unist_position:new(4, 7, 67, 4, 8, 68)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(4, 5, 65, 4, 9, 69)}
                }),
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"d">>,
                      position = {some, markdown_unist_position:new(4, 11, 71, 4, 12, 72)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(4, 9, 69, 4, 13, 73)}
                }),
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"e">>,
                      position = {some, markdown_unist_position:new(4, 15, 75, 4, 16, 76)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(4, 13, 73, 4, 17, 77)}
                }),
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:text(#markdown_mdast_text{
                      value = <<"f">>,
                      position = {some, markdown_unist_position:new(4, 19, 79, 4, 20, 80)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(4, 17, 77, 4, 22, 82)}
                })
              ]),
              position = {some, markdown_unist_position:new(4, 1, 61, 4, 22, 82)}
            })
          ]),
          position = {some, markdown_unist_position:new(1, 1, 0, 4, 22, 82)}
        })
      ]),
      position = {some, markdown_unist_position:new(1, 1, 0, 4, 22, 82)}
    })
  message: "should support GFM tables as `Table`, `TableRow`, `TableCell`s in mdast"
  parse_options: ParseOptions::gfm()
- name: test_gfm_table_case_66
  input: |-
    | `a\|b` |
    | - |
  output: |-
    markdown_mdast_node:root(#markdown_mdast_root{
      children = ?'vec!'([
        markdown_mdast_node:table(#markdown_mdast_table{
          align = ?'vec!'([
            markdown_align_kind:none()
          ]),
          children = ?'vec!'([
            markdown_mdast_node:table_row(#markdown_mdast_table_row{
              children = ?'vec!'([
                markdown_mdast_node:table_cell(#markdown_mdast_table_cell{
                  children = ?'vec!'([
                    markdown_mdast_node:inline_code(#markdown_mdast_inline_code{
                      value = <<"a|b">>,
                      position = {some, markdown_unist_position:new(1, 3, 2, 1, 9, 8)}
                    })
                  ]),
                  position = {some, markdown_unist_position:new(1, 1, 0, 1, 11, 10)}
                })
              ]),
              position = {some, markdown_unist_position:new(1, 1, 0, 1, 11, 10)}
            })
          ]),
          position = {some, markdown_unist_position:new(1, 1, 0, 2, 6, 16)}
        })
      ]),
      position = {some, markdown_unist_position:new(1, 1, 0, 2, 6, 16)}
    })
  message: "should support weird pipe escapes in code in tables"
  parse_options: ParseOptions::gfm()
