# yaml-language-server: $schema=./schema.json

###-----------------------------------------------------------------------------
### %CopyrightBegin%
###
### SPDX-License-Identifier: Apache-2.0
###
### Copyright (c) Meta Platforms, Inc. and affiliates.
### Copyright (c) WhatsApp LLC
###
### Licensed under the Apache License, Version 2.0 (the "License");
### you may not use this file except in compliance with the License.
### You may obtain a copy of the License at
###
###     http://www.apache.org/licenses/LICENSE-2.0
###
### Unless required by applicable law or agreed to in writing, software
### distributed under the License is distributed on an "AS IS" BASIS,
### WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
### See the License for the specific language governing permissions and
### limitations under the License.
###
### %CopyrightEnd%
###-----------------------------------------------------------------------------

---
suite:
  name: frontmatter
  created: 2025-10-03
  modified: 2025-10-03
shared_options:
- name: frontmatter
  options:
    parse:
      constructs:
        frontmatter: true
shared_parse_options:
- name: frontmatter_parse
  parse_options:
    constructs:
      frontmatter: true
to_html:
- name: test_frontmatter_case_1
  input: |-
    ---
    title: Jupyter
    ---
  output: |-
    <hr />
    <h2>title: Jupyter</h2>
  message: should not support frontmatter by default
to_html_with_options:
- name: test_frontmatter_case_2
  input: |-
    ---
    title: Jupyter
    ---
  output: ''
  message: should support frontmatter (yaml)
  options: frontmatter
- name: test_frontmatter_case_3
  input: |-
    +++
    title = "Jupyter"
    +++
  output: ''
  message: should support frontmatter (toml)
  options: frontmatter
- name: test_frontmatter_case_4
  input: |-
    ---
    ---
  output: ''
  message: should support empty frontmatter
  options: frontmatter
- name: test_frontmatter_case_5
  input: |-
    --
    ---
  output: <h2>--</h2>
  message: should not support 2 markers in an opening fence
  options: frontmatter
- name: test_frontmatter_case_6
  input: |-
    ----
    ---
  output: |-
    <hr />
    <hr />
  message: should not support 4 markers in an opening fence
  options: frontmatter
- name: test_frontmatter_case_7
  input: |-
    ---
    --
  output: |-
    <hr />
    <p>--</p>
  message: should not support 2 markers in a closing fence
  options: frontmatter
- name: test_frontmatter_case_8
  input: |
    ---
    --
  output: |
    <hr />
    <p>--</p>
  message: should not panic if newline after 2 marker closing fence
  options: frontmatter
- name: test_frontmatter_case_9
  input: |-
    ---
    ----
  output: |-
    <hr />
    <hr />
  message: should not support 4 markers in a closing fence
  options: frontmatter
- name: test_frontmatter_case_10
  input: |-
    ---
    ---
    ## Neptune
  output: <h2>Neptune</h2>
  message: should support content after frontmatter
  options: frontmatter
- name: test_frontmatter_case_11
  input: "--- \t\n---"
  output: ''
  message: should support spaces and tabs after opening fence
  options: frontmatter
- name: test_frontmatter_case_12
  input: "---\n---\t "
  output: ''
  message: should support spaces and tabs after closing fence
  options: frontmatter
- name: test_frontmatter_case_13
  input: |-
    ---
    ---
    a
    b
  output: |-
    <p>a
    b</p>
  message: should support line endings after frontmatter
  options: frontmatter
- name: test_frontmatter_case_14
  input: |-
    --- a
    ---
  output: <h2>--- a</h2>
  message: should not support content after opening fence
  options: frontmatter
- name: test_frontmatter_case_15
  input: |-
    ---
    --- b
  output: |-
    <hr />
    <p>--- b</p>
  message: should not support content after closing fence
  options: frontmatter
- name: test_frontmatter_case_16
  input: |-
    ## Neptune
    ---
    ---
  output: |-
    <h2>Neptune</h2>
    <hr />
    <hr />
  message: should not support frontmatter after content
  options: frontmatter
- name: test_frontmatter_case_17
  input: |-
    > ---
    > ---
    > ## Neptune
  output: |-
    <blockquote>
    <hr />
    <hr />
    <h2>Neptune</h2>
    </blockquote>
  message: should not support frontmatter in a container
  options: frontmatter
- name: test_frontmatter_case_18
  input: '---'
  output: <hr />
  message: should not support just an opening fence
  options: frontmatter
- name: test_frontmatter_case_19
  input: |-
    ---
    title: Neptune
  output: |-
    <hr />
    <p>title: Neptune</p>
  message: should not support a missing closing fence
  options: frontmatter
- name: test_frontmatter_case_20
  input: "---\na\n\nb\n \t\nc\n---"
  output: ''
  message: should support blank lines in frontmatter
  options: frontmatter
to_mdast:
- name: test_frontmatter_case_21
  input: |-
    ---
    a: b
    ---
  output: |-
    markdown_mdast_node:root(#markdown_mdast_root{
      children = ?'vec!'([
        markdown_mdast_node:yaml(#markdown_mdast_yaml{
          value = <<"a: b">>,
          position = {some, markdown_unist_position:new(1, 1, 0, 3, 4, 12)}
        })
      ]),
      position = {some, markdown_unist_position:new(1, 1, 0, 3, 4, 12)}
    })
  message: "should support yaml as `Yaml`s in mdast"
  parse_options: frontmatter_parse
- name: test_frontmatter_case_22
  input: |-
    +++
    title = "Jupyter"
    +++
  output: |-
    markdown_mdast_node:root(#markdown_mdast_root{
      children = ?'vec!'([
        markdown_mdast_node:toml(#markdown_mdast_toml{
          value = <<"title = \"Jupyter\"">>,
          position = {some, markdown_unist_position:new(1, 1, 0, 3, 4, 25)}
        })
      ]),
      position = {some, markdown_unist_position:new(1, 1, 0, 3, 4, 25)}
    })
  message: "should support toml as `Toml`s in mdast"
  parse_options: frontmatter_parse
